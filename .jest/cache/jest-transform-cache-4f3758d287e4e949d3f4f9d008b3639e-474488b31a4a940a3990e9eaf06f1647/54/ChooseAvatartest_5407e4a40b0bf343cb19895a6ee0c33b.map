{"version":3,"names":["_getJestObj","mock","postContact","jest","fn","Promise","resolve","status","putContact","_interopRequireDefault","require","_asyncToGenerator2","_react","_reactNative","_ChooseAvatar","_contact","_testUtils","_jsxRuntime","_require","createTestProps","props","Object","assign","navigation","navigate","replace","describe","test","default","_renderWithProviders","renderWithProviders","jsx","route","key","name","params","isEdit","getByLabelText","getAllByTestId","expect","toBeTruthy","fireEvent","press","waitFor","accessibilityState","disabled","toBe","act","toHaveBeenCalledTimes","toHaveBeenCalledWith","_renderWithProviders2"],"sources":["ChooseAvatar.test.tsx"],"sourcesContent":["import React from 'react';\nimport {fireEvent, waitFor, act} from '@testing-library/react-native';\nimport ChooseAvatar from '../ChooseAvatar';\nimport {postContact, putContact} from '../../apis/contact';\nimport {StackNavigationProp} from '@react-navigation/stack';\nimport {RootStackParamList} from '../../types';\nimport {renderWithProviders} from '../../utils/test-utils';\n\njest.mock('../../apis/contact', () => ({\n  postContact: jest.fn(() =>\n    Promise.resolve({\n      status: 201,\n    }),\n  ),\n  putContact: jest.fn(() =>\n    Promise.resolve({\n      status: 201,\n    }),\n  ),\n}));\n\ntype NavigationProps = StackNavigationProp<RootStackParamList, 'ChooseAvatar'>;\n\nconst createTestProps = (props: Partial<NavigationProps>) => ({\n  navigation: {\n    navigate: jest.fn(),\n    replace: jest.fn(),\n    ...props,\n  } as NavigationProps,\n  ...props,\n});\n\ndescribe('ChooseAvatar', () => {\n  test('navigates to List screen after successful contact creation', async () => {\n    const props = createTestProps({});\n\n    const {getByLabelText, getAllByTestId} = renderWithProviders(\n      <ChooseAvatar\n        route={{\n          key: 'ChooseAvatar',\n          name: 'ChooseAvatar',\n          params: {isEdit: false},\n        }}\n        {...props}\n      />,\n    );\n\n    expect(getAllByTestId('avatar-image')[0]).toBeTruthy();\n    expect(getByLabelText('button-save')).toBeTruthy();\n    fireEvent.press(getAllByTestId('avatar-image')[0]);\n\n    await waitFor(() => {\n      expect(\n        getByLabelText('button-save').props.accessibilityState.disabled,\n      ).toBe(false);\n    });\n\n    await act(async () => {\n      fireEvent.press(getByLabelText('button-save'));\n\n      await waitFor(() => {\n        expect(postContact).toHaveBeenCalledTimes(1);\n        expect(props.navigation.replace).toHaveBeenCalledWith('List');\n      });\n    });\n  });\n\n  test('navigates to List screen after successful contact update', async () => {\n    const props = createTestProps({});\n\n    const {getByLabelText, getAllByTestId} = renderWithProviders(\n      <ChooseAvatar\n        route={{\n          key: 'ChooseAvatar',\n          name: 'ChooseAvatar',\n          params: {isEdit: true},\n        }}\n        {...props}\n      />,\n    );\n\n    expect(getAllByTestId('avatar-image')[0]).toBeTruthy();\n    expect(getByLabelText('button-update')).toBeTruthy();\n\n    fireEvent.press(getAllByTestId('avatar-image')[0]);\n\n    await waitFor(() => {\n      expect(\n        getByLabelText('button-update').props.accessibilityState.disabled,\n      ).toBe(true);\n    });\n    fireEvent.press(getByLabelText('button-update'));\n\n    await waitFor(() => {\n      expect(putContact).toHaveBeenCalledTimes(1);\n      expect(props.navigation.replace).toHaveBeenCalledWith('List');\n    });\n  });\n});\n"],"mappings":"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"}