57fa1554247fdd5f89ea499bdf2a4839
_getJestObj().mock('../../apis/contact', function () {
  return {
    postContact: jest.fn(function () {
      return Promise.resolve({
        status: 201
      });
    }),
    putContact: jest.fn(function () {
      return Promise.resolve({
        status: 201
      });
    })
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _ChooseAvatar = _interopRequireDefault(require("../ChooseAvatar"));
var _contact = require("../../apis/contact");
var _testUtils = require("../../utils/test-utils");
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var createTestProps = function createTestProps(props) {
  return Object.assign({
    navigation: Object.assign({
      navigate: jest.fn(),
      replace: jest.fn()
    }, props)
  }, props);
};
describe('ChooseAvatar', function () {
  test('navigates to List screen after successful contact creation', (0, _asyncToGenerator2.default)(function* () {
    var props = createTestProps({});
    var _renderWithProviders = (0, _testUtils.renderWithProviders)((0, _jsxRuntime.jsx)(_ChooseAvatar.default, Object.assign({
        route: {
          key: 'ChooseAvatar',
          name: 'ChooseAvatar',
          params: {
            isEdit: false
          }
        }
      }, props))),
      getByLabelText = _renderWithProviders.getByLabelText,
      getAllByTestId = _renderWithProviders.getAllByTestId;
    expect(getAllByTestId('avatar-image')[0]).toBeTruthy();
    expect(getByLabelText('button-save')).toBeTruthy();
    _reactNative.fireEvent.press(getAllByTestId('avatar-image')[0]);
    yield (0, _reactNative.waitFor)(function () {
      expect(getByLabelText('button-save').props.accessibilityState.disabled).toBe(false);
    });
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(getByLabelText('button-save'));
      yield (0, _reactNative.waitFor)(function () {
        expect(_contact.postContact).toHaveBeenCalledTimes(1);
        expect(props.navigation.replace).toHaveBeenCalledWith('List');
      });
    }));
  }));
  test('navigates to List screen after successful contact update', (0, _asyncToGenerator2.default)(function* () {
    var props = createTestProps({});
    var _renderWithProviders2 = (0, _testUtils.renderWithProviders)((0, _jsxRuntime.jsx)(_ChooseAvatar.default, Object.assign({
        route: {
          key: 'ChooseAvatar',
          name: 'ChooseAvatar',
          params: {
            isEdit: true
          }
        }
      }, props))),
      getByLabelText = _renderWithProviders2.getByLabelText,
      getAllByTestId = _renderWithProviders2.getAllByTestId;
    expect(getAllByTestId('avatar-image')[0]).toBeTruthy();
    expect(getByLabelText('button-update')).toBeTruthy();
    _reactNative.fireEvent.press(getAllByTestId('avatar-image')[0]);
    yield (0, _reactNative.waitFor)(function () {
      expect(getByLabelText('button-update').props.accessibilityState.disabled).toBe(false);
    });
    _reactNative.fireEvent.press(getByLabelText('button-update'));
    yield (0, _reactNative.waitFor)(function () {
      expect(_contact.putContact).toHaveBeenCalledTimes(1);
      expect(props.navigation.replace).toHaveBeenCalledWith('List');
    });
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJwb3N0Q29udGFjdCIsImplc3QiLCJmbiIsIlByb21pc2UiLCJyZXNvbHZlIiwic3RhdHVzIiwicHV0Q29udGFjdCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX3JlYWN0IiwiX3JlYWN0TmF0aXZlIiwiX0Nob29zZUF2YXRhciIsIl9jb250YWN0IiwiX3Rlc3RVdGlscyIsIl9qc3hSdW50aW1lIiwiX3JlcXVpcmUiLCJjcmVhdGVUZXN0UHJvcHMiLCJwcm9wcyIsIk9iamVjdCIsImFzc2lnbiIsIm5hdmlnYXRpb24iLCJuYXZpZ2F0ZSIsInJlcGxhY2UiLCJkZXNjcmliZSIsInRlc3QiLCJkZWZhdWx0IiwiX3JlbmRlcldpdGhQcm92aWRlcnMiLCJyZW5kZXJXaXRoUHJvdmlkZXJzIiwianN4Iiwicm91dGUiLCJrZXkiLCJuYW1lIiwicGFyYW1zIiwiaXNFZGl0IiwiZ2V0QnlMYWJlbFRleHQiLCJnZXRBbGxCeVRlc3RJZCIsImV4cGVjdCIsInRvQmVUcnV0aHkiLCJmaXJlRXZlbnQiLCJwcmVzcyIsIndhaXRGb3IiLCJhY2Nlc3NpYmlsaXR5U3RhdGUiLCJkaXNhYmxlZCIsInRvQmUiLCJhY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIl9yZW5kZXJXaXRoUHJvdmlkZXJzMiJdLCJzb3VyY2VzIjpbIkNob29zZUF2YXRhci50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtmaXJlRXZlbnQsIHdhaXRGb3IsIGFjdH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdC1uYXRpdmUnO1xuaW1wb3J0IENob29zZUF2YXRhciBmcm9tICcuLi9DaG9vc2VBdmF0YXInO1xuaW1wb3J0IHtwb3N0Q29udGFjdCwgcHV0Q29udGFjdH0gZnJvbSAnLi4vLi4vYXBpcy9jb250YWN0JztcbmltcG9ydCB7U3RhY2tOYXZpZ2F0aW9uUHJvcH0gZnJvbSAnQHJlYWN0LW5hdmlnYXRpb24vc3RhY2snO1xuaW1wb3J0IHtSb290U3RhY2tQYXJhbUxpc3R9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7cmVuZGVyV2l0aFByb3ZpZGVyc30gZnJvbSAnLi4vLi4vdXRpbHMvdGVzdC11dGlscyc7XG5cbmplc3QubW9jaygnLi4vLi4vYXBpcy9jb250YWN0JywgKCkgPT4gKHtcbiAgcG9zdENvbnRhY3Q6IGplc3QuZm4oKCkgPT5cbiAgICBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgc3RhdHVzOiAyMDEsXG4gICAgfSksXG4gICksXG4gIHB1dENvbnRhY3Q6IGplc3QuZm4oKCkgPT5cbiAgICBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgc3RhdHVzOiAyMDEsXG4gICAgfSksXG4gICksXG59KSk7XG5cbnR5cGUgTmF2aWdhdGlvblByb3BzID0gU3RhY2tOYXZpZ2F0aW9uUHJvcDxSb290U3RhY2tQYXJhbUxpc3QsICdDaG9vc2VBdmF0YXInPjtcblxuY29uc3QgY3JlYXRlVGVzdFByb3BzID0gKHByb3BzOiBQYXJ0aWFsPE5hdmlnYXRpb25Qcm9wcz4pID0+ICh7XG4gIG5hdmlnYXRpb246IHtcbiAgICBuYXZpZ2F0ZTogamVzdC5mbigpLFxuICAgIHJlcGxhY2U6IGplc3QuZm4oKSxcbiAgICAuLi5wcm9wcyxcbiAgfSBhcyBOYXZpZ2F0aW9uUHJvcHMsXG4gIC4uLnByb3BzLFxufSk7XG5cbmRlc2NyaWJlKCdDaG9vc2VBdmF0YXInLCAoKSA9PiB7XG4gIHRlc3QoJ25hdmlnYXRlcyB0byBMaXN0IHNjcmVlbiBhZnRlciBzdWNjZXNzZnVsIGNvbnRhY3QgY3JlYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSBjcmVhdGVUZXN0UHJvcHMoe30pO1xuXG4gICAgY29uc3Qge2dldEJ5TGFiZWxUZXh0LCBnZXRBbGxCeVRlc3RJZH0gPSByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgPENob29zZUF2YXRhclxuICAgICAgICByb3V0ZT17e1xuICAgICAgICAgIGtleTogJ0Nob29zZUF2YXRhcicsXG4gICAgICAgICAgbmFtZTogJ0Nob29zZUF2YXRhcicsXG4gICAgICAgICAgcGFyYW1zOiB7aXNFZGl0OiBmYWxzZX0sXG4gICAgICAgIH19XG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgIC8+LFxuICAgICk7XG5cbiAgICBleHBlY3QoZ2V0QWxsQnlUZXN0SWQoJ2F2YXRhci1pbWFnZScpWzBdKS50b0JlVHJ1dGh5KCk7XG4gICAgZXhwZWN0KGdldEJ5TGFiZWxUZXh0KCdidXR0b24tc2F2ZScpKS50b0JlVHJ1dGh5KCk7XG4gICAgZmlyZUV2ZW50LnByZXNzKGdldEFsbEJ5VGVzdElkKCdhdmF0YXItaW1hZ2UnKVswXSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChcbiAgICAgICAgZ2V0QnlMYWJlbFRleHQoJ2J1dHRvbi1zYXZlJykucHJvcHMuYWNjZXNzaWJpbGl0eVN0YXRlLmRpc2FibGVkLFxuICAgICAgKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICBmaXJlRXZlbnQucHJlc3MoZ2V0QnlMYWJlbFRleHQoJ2J1dHRvbi1zYXZlJykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHBvc3RDb250YWN0KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICAgIGV4cGVjdChwcm9wcy5uYXZpZ2F0aW9uLnJlcGxhY2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdMaXN0Jyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnbmF2aWdhdGVzIHRvIExpc3Qgc2NyZWVuIGFmdGVyIHN1Y2Nlc3NmdWwgY29udGFjdCB1cGRhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSBjcmVhdGVUZXN0UHJvcHMoe30pO1xuXG4gICAgY29uc3Qge2dldEJ5TGFiZWxUZXh0LCBnZXRBbGxCeVRlc3RJZH0gPSByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgPENob29zZUF2YXRhclxuICAgICAgICByb3V0ZT17e1xuICAgICAgICAgIGtleTogJ0Nob29zZUF2YXRhcicsXG4gICAgICAgICAgbmFtZTogJ0Nob29zZUF2YXRhcicsXG4gICAgICAgICAgcGFyYW1zOiB7aXNFZGl0OiB0cnVlfSxcbiAgICAgICAgfX1cbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgLz4sXG4gICAgKTtcblxuICAgIGV4cGVjdChnZXRBbGxCeVRlc3RJZCgnYXZhdGFyLWltYWdlJylbMF0pLnRvQmVUcnV0aHkoKTtcbiAgICBleHBlY3QoZ2V0QnlMYWJlbFRleHQoJ2J1dHRvbi11cGRhdGUnKSkudG9CZVRydXRoeSgpO1xuXG4gICAgZmlyZUV2ZW50LnByZXNzKGdldEFsbEJ5VGVzdElkKCdhdmF0YXItaW1hZ2UnKVswXSk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChcbiAgICAgICAgZ2V0QnlMYWJlbFRleHQoJ2J1dHRvbi11cGRhdGUnKS5wcm9wcy5hY2Nlc3NpYmlsaXR5U3RhdGUuZGlzYWJsZWQsXG4gICAgICApLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgZmlyZUV2ZW50LnByZXNzKGdldEJ5TGFiZWxUZXh0KCdidXR0b24tdXBkYXRlJykpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QocHV0Q29udGFjdCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgZXhwZWN0KHByb3BzLm5hdmlnYXRpb24ucmVwbGFjZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0xpc3QnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBUUFBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLG9CQUFvQixF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