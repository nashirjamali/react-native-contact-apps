1bf5b1c5b8d02d4d87ca9c19e61c1ed3
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _NativeAnimatedHelper = _interopRequireDefault(require("../NativeAnimatedHelper"));
var _AnimatedColor = _interopRequireDefault(require("../nodes/AnimatedColor"));
var SpringConfig = _interopRequireWildcard(require("../SpringConfig"));
var _Animation2 = _interopRequireDefault(require("./Animation"));
var _invariant = _interopRequireDefault(require("invariant"));
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
var SpringAnimation = function (_Animation) {
  (0, _inherits2.default)(SpringAnimation, _Animation);
  var _super = _createSuper(SpringAnimation);
  function SpringAnimation(config) {
    var _config$overshootClam, _config$restDisplacem, _config$restSpeedThre, _config$velocity, _config$velocity2, _config$delay, _config$isInteraction, _config$iterations;
    var _this;
    (0, _classCallCheck2.default)(this, SpringAnimation);
    _this = _super.call(this);
    _this._overshootClamping = (_config$overshootClam = config.overshootClamping) != null ? _config$overshootClam : false;
    _this._restDisplacementThreshold = (_config$restDisplacem = config.restDisplacementThreshold) != null ? _config$restDisplacem : 0.001;
    _this._restSpeedThreshold = (_config$restSpeedThre = config.restSpeedThreshold) != null ? _config$restSpeedThre : 0.001;
    _this._initialVelocity = (_config$velocity = config.velocity) != null ? _config$velocity : 0;
    _this._lastVelocity = (_config$velocity2 = config.velocity) != null ? _config$velocity2 : 0;
    _this._toValue = config.toValue;
    _this._delay = (_config$delay = config.delay) != null ? _config$delay : 0;
    _this._useNativeDriver = _NativeAnimatedHelper.default.shouldUseNativeDriver(config);
    _this._platformConfig = config.platformConfig;
    _this.__isInteraction = (_config$isInteraction = config.isInteraction) != null ? _config$isInteraction : !_this._useNativeDriver;
    _this.__iterations = (_config$iterations = config.iterations) != null ? _config$iterations : 1;
    if (config.stiffness !== undefined || config.damping !== undefined || config.mass !== undefined) {
      var _config$stiffness, _config$damping, _config$mass;
      (0, _invariant.default)(config.bounciness === undefined && config.speed === undefined && config.tension === undefined && config.friction === undefined, 'You can define one of bounciness/speed, tension/friction, or stiffness/damping/mass, but not more than one');
      _this._stiffness = (_config$stiffness = config.stiffness) != null ? _config$stiffness : 100;
      _this._damping = (_config$damping = config.damping) != null ? _config$damping : 10;
      _this._mass = (_config$mass = config.mass) != null ? _config$mass : 1;
    } else if (config.bounciness !== undefined || config.speed !== undefined) {
      var _config$bounciness, _config$speed;
      (0, _invariant.default)(config.tension === undefined && config.friction === undefined && config.stiffness === undefined && config.damping === undefined && config.mass === undefined, 'You can define one of bounciness/speed, tension/friction, or stiffness/damping/mass, but not more than one');
      var springConfig = SpringConfig.fromBouncinessAndSpeed((_config$bounciness = config.bounciness) != null ? _config$bounciness : 8, (_config$speed = config.speed) != null ? _config$speed : 12);
      _this._stiffness = springConfig.stiffness;
      _this._damping = springConfig.damping;
      _this._mass = 1;
    } else {
      var _config$tension, _config$friction;
      var _springConfig = SpringConfig.fromOrigamiTensionAndFriction((_config$tension = config.tension) != null ? _config$tension : 40, (_config$friction = config.friction) != null ? _config$friction : 7);
      _this._stiffness = _springConfig.stiffness;
      _this._damping = _springConfig.damping;
      _this._mass = 1;
    }
    (0, _invariant.default)(_this._stiffness > 0, 'Stiffness value must be greater than 0');
    (0, _invariant.default)(_this._damping > 0, 'Damping value must be greater than 0');
    (0, _invariant.default)(_this._mass > 0, 'Mass value must be greater than 0');
    return _this;
  }
  (0, _createClass2.default)(SpringAnimation, [{
    key: "__getNativeAnimationConfig",
    value: function __getNativeAnimationConfig() {
      var _this$_initialVelocit;
      return {
        type: 'spring',
        overshootClamping: this._overshootClamping,
        restDisplacementThreshold: this._restDisplacementThreshold,
        restSpeedThreshold: this._restSpeedThreshold,
        stiffness: this._stiffness,
        damping: this._damping,
        mass: this._mass,
        initialVelocity: (_this$_initialVelocit = this._initialVelocity) != null ? _this$_initialVelocit : this._lastVelocity,
        toValue: this._toValue,
        iterations: this.__iterations,
        platformConfig: this._platformConfig
      };
    }
  }, {
    key: "start",
    value: function start(fromValue, onUpdate, onEnd, previousAnimation, animatedValue) {
      var _this2 = this;
      this.__active = true;
      this._startPosition = fromValue;
      this._lastPosition = this._startPosition;
      this._onUpdate = onUpdate;
      this.__onEnd = onEnd;
      this._lastTime = Date.now();
      this._frameTime = 0.0;
      if (previousAnimation instanceof SpringAnimation) {
        var internalState = previousAnimation.getInternalState();
        this._lastPosition = internalState.lastPosition;
        this._lastVelocity = internalState.lastVelocity;
        this._initialVelocity = this._lastVelocity;
        this._lastTime = internalState.lastTime;
      }
      var start = function start() {
        if (_this2._useNativeDriver) {
          _this2.__startNativeAnimation(animatedValue);
        } else {
          _this2.onUpdate();
        }
      };
      if (this._delay) {
        this._timeout = setTimeout(start, this._delay);
      } else {
        start();
      }
    }
  }, {
    key: "getInternalState",
    value: function getInternalState() {
      return {
        lastPosition: this._lastPosition,
        lastVelocity: this._lastVelocity,
        lastTime: this._lastTime
      };
    }
  }, {
    key: "onUpdate",
    value: function onUpdate() {
      var MAX_STEPS = 64;
      var now = Date.now();
      if (now > this._lastTime + MAX_STEPS) {
        now = this._lastTime + MAX_STEPS;
      }
      var deltaTime = (now - this._lastTime) / 1000;
      this._frameTime += deltaTime;
      var c = this._damping;
      var m = this._mass;
      var k = this._stiffness;
      var v0 = -this._initialVelocity;
      var zeta = c / (2 * Math.sqrt(k * m));
      var omega0 = Math.sqrt(k / m);
      var omega1 = omega0 * Math.sqrt(1.0 - zeta * zeta);
      var x0 = this._toValue - this._startPosition;
      var position = 0.0;
      var velocity = 0.0;
      var t = this._frameTime;
      if (zeta < 1) {
        var envelope = Math.exp(-zeta * omega0 * t);
        position = this._toValue - envelope * ((v0 + zeta * omega0 * x0) / omega1 * Math.sin(omega1 * t) + x0 * Math.cos(omega1 * t));
        velocity = zeta * omega0 * envelope * (Math.sin(omega1 * t) * (v0 + zeta * omega0 * x0) / omega1 + x0 * Math.cos(omega1 * t)) - envelope * (Math.cos(omega1 * t) * (v0 + zeta * omega0 * x0) - omega1 * x0 * Math.sin(omega1 * t));
      } else {
        var _envelope = Math.exp(-omega0 * t);
        position = this._toValue - _envelope * (x0 + (v0 + omega0 * x0) * t);
        velocity = _envelope * (v0 * (t * omega0 - 1) + t * x0 * (omega0 * omega0));
      }
      this._lastTime = now;
      this._lastPosition = position;
      this._lastVelocity = velocity;
      this._onUpdate(position);
      if (!this.__active) {
        return;
      }
      var isOvershooting = false;
      if (this._overshootClamping && this._stiffness !== 0) {
        if (this._startPosition < this._toValue) {
          isOvershooting = position > this._toValue;
        } else {
          isOvershooting = position < this._toValue;
        }
      }
      var isVelocity = Math.abs(velocity) <= this._restSpeedThreshold;
      var isDisplacement = true;
      if (this._stiffness !== 0) {
        isDisplacement = Math.abs(this._toValue - position) <= this._restDisplacementThreshold;
      }
      if (isOvershooting || isVelocity && isDisplacement) {
        if (this._stiffness !== 0) {
          this._lastPosition = this._toValue;
          this._lastVelocity = 0;
          this._onUpdate(this._toValue);
        }
        this.__debouncedOnEnd({
          finished: true
        });
        return;
      }
      this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));
    }
  }, {
    key: "stop",
    value: function stop() {
      (0, _get2.default)((0, _getPrototypeOf2.default)(SpringAnimation.prototype), "stop", this).call(this);
      this.__active = false;
      clearTimeout(this._timeout);
      global.cancelAnimationFrame(this._animationFrame);
      this.__debouncedOnEnd({
        finished: false
      });
    }
  }]);
  return SpringAnimation;
}(_Animation2.default);
exports.default = SpringAnimation;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiX2dldDIiLCJfaW5oZXJpdHMyIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yIiwiX2dldFByb3RvdHlwZU9mMiIsIl9OYXRpdmVBbmltYXRlZEhlbHBlciIsIl9BbmltYXRlZENvbG9yIiwiU3ByaW5nQ29uZmlnIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfQW5pbWF0aW9uMiIsIl9pbnZhcmlhbnQiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJub2RlSW50ZXJvcCIsIldlYWtNYXAiLCJjYWNoZUJhYmVsSW50ZXJvcCIsImNhY2hlTm9kZUludGVyb3AiLCJvYmoiLCJfX2VzTW9kdWxlIiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0IiwiX2NyZWF0ZVN1cGVyIiwiRGVyaXZlZCIsImhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiX2NyZWF0ZVN1cGVySW50ZXJuYWwiLCJTdXBlciIsInJlc3VsdCIsIk5ld1RhcmdldCIsImNvbnN0cnVjdG9yIiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsImFyZ3VtZW50cyIsImFwcGx5Iiwic2hhbSIsIlByb3h5IiwiQm9vbGVhbiIsInZhbHVlT2YiLCJlIiwiU3ByaW5nQW5pbWF0aW9uIiwiX0FuaW1hdGlvbiIsIl9zdXBlciIsImNvbmZpZyIsIl9jb25maWckb3ZlcnNob290Q2xhbSIsIl9jb25maWckcmVzdERpc3BsYWNlbSIsIl9jb25maWckcmVzdFNwZWVkVGhyZSIsIl9jb25maWckdmVsb2NpdHkiLCJfY29uZmlnJHZlbG9jaXR5MiIsIl9jb25maWckZGVsYXkiLCJfY29uZmlnJGlzSW50ZXJhY3Rpb24iLCJfY29uZmlnJGl0ZXJhdGlvbnMiLCJfdGhpcyIsIl9vdmVyc2hvb3RDbGFtcGluZyIsIm92ZXJzaG9vdENsYW1waW5nIiwiX3Jlc3REaXNwbGFjZW1lbnRUaHJlc2hvbGQiLCJyZXN0RGlzcGxhY2VtZW50VGhyZXNob2xkIiwiX3Jlc3RTcGVlZFRocmVzaG9sZCIsInJlc3RTcGVlZFRocmVzaG9sZCIsIl9pbml0aWFsVmVsb2NpdHkiLCJ2ZWxvY2l0eSIsIl9sYXN0VmVsb2NpdHkiLCJfdG9WYWx1ZSIsInRvVmFsdWUiLCJfZGVsYXkiLCJkZWxheSIsIl91c2VOYXRpdmVEcml2ZXIiLCJOYXRpdmVBbmltYXRlZEhlbHBlciIsInNob3VsZFVzZU5hdGl2ZURyaXZlciIsIl9wbGF0Zm9ybUNvbmZpZyIsInBsYXRmb3JtQ29uZmlnIiwiX19pc0ludGVyYWN0aW9uIiwiaXNJbnRlcmFjdGlvbiIsIl9faXRlcmF0aW9ucyIsIml0ZXJhdGlvbnMiLCJzdGlmZm5lc3MiLCJ1bmRlZmluZWQiLCJkYW1waW5nIiwibWFzcyIsIl9jb25maWckc3RpZmZuZXNzIiwiX2NvbmZpZyRkYW1waW5nIiwiX2NvbmZpZyRtYXNzIiwiaW52YXJpYW50IiwiYm91bmNpbmVzcyIsInNwZWVkIiwidGVuc2lvbiIsImZyaWN0aW9uIiwiX3N0aWZmbmVzcyIsIl9kYW1waW5nIiwiX21hc3MiLCJfY29uZmlnJGJvdW5jaW5lc3MiLCJfY29uZmlnJHNwZWVkIiwic3ByaW5nQ29uZmlnIiwiZnJvbUJvdW5jaW5lc3NBbmRTcGVlZCIsIl9jb25maWckdGVuc2lvbiIsIl9jb25maWckZnJpY3Rpb24iLCJmcm9tT3JpZ2FtaVRlbnNpb25BbmRGcmljdGlvbiIsIl9fZ2V0TmF0aXZlQW5pbWF0aW9uQ29uZmlnIiwiX3RoaXMkX2luaXRpYWxWZWxvY2l0IiwidHlwZSIsImluaXRpYWxWZWxvY2l0eSIsInN0YXJ0IiwiZnJvbVZhbHVlIiwib25VcGRhdGUiLCJvbkVuZCIsInByZXZpb3VzQW5pbWF0aW9uIiwiYW5pbWF0ZWRWYWx1ZSIsIl90aGlzMiIsIl9fYWN0aXZlIiwiX3N0YXJ0UG9zaXRpb24iLCJfbGFzdFBvc2l0aW9uIiwiX29uVXBkYXRlIiwiX19vbkVuZCIsIl9sYXN0VGltZSIsIkRhdGUiLCJub3ciLCJfZnJhbWVUaW1lIiwiaW50ZXJuYWxTdGF0ZSIsImdldEludGVybmFsU3RhdGUiLCJsYXN0UG9zaXRpb24iLCJsYXN0VmVsb2NpdHkiLCJsYXN0VGltZSIsIl9fc3RhcnROYXRpdmVBbmltYXRpb24iLCJfdGltZW91dCIsInNldFRpbWVvdXQiLCJNQVhfU1RFUFMiLCJkZWx0YVRpbWUiLCJjIiwibSIsImsiLCJ2MCIsInpldGEiLCJNYXRoIiwic3FydCIsIm9tZWdhMCIsIm9tZWdhMSIsIngwIiwicG9zaXRpb24iLCJ0IiwiZW52ZWxvcGUiLCJleHAiLCJzaW4iLCJjb3MiLCJpc092ZXJzaG9vdGluZyIsImlzVmVsb2NpdHkiLCJhYnMiLCJpc0Rpc3BsYWNlbWVudCIsIl9fZGVib3VuY2VkT25FbmQiLCJmaW5pc2hlZCIsIl9hbmltYXRpb25GcmFtZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImJpbmQiLCJzdG9wIiwiY2xlYXJUaW1lb3V0IiwiZ2xvYmFsIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJBbmltYXRpb24iXSwic291cmNlcyI6WyJTcHJpbmdBbmltYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7UGxhdGZvcm1Db25maWd9IGZyb20gJy4uL0FuaW1hdGVkUGxhdGZvcm1Db25maWcnO1xuaW1wb3J0IHR5cGUgQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIGZyb20gJy4uL25vZGVzL0FuaW1hdGVkSW50ZXJwb2xhdGlvbic7XG5pbXBvcnQgdHlwZSBBbmltYXRlZFZhbHVlIGZyb20gJy4uL25vZGVzL0FuaW1hdGVkVmFsdWUnO1xuaW1wb3J0IHR5cGUgQW5pbWF0ZWRWYWx1ZVhZIGZyb20gJy4uL25vZGVzL0FuaW1hdGVkVmFsdWVYWSc7XG5pbXBvcnQgdHlwZSB7QW5pbWF0aW9uQ29uZmlnLCBFbmRDYWxsYmFja30gZnJvbSAnLi9BbmltYXRpb24nO1xuXG5pbXBvcnQgTmF0aXZlQW5pbWF0ZWRIZWxwZXIgZnJvbSAnLi4vTmF0aXZlQW5pbWF0ZWRIZWxwZXInO1xuaW1wb3J0IEFuaW1hdGVkQ29sb3IgZnJvbSAnLi4vbm9kZXMvQW5pbWF0ZWRDb2xvcic7XG5pbXBvcnQgKiBhcyBTcHJpbmdDb25maWcgZnJvbSAnLi4vU3ByaW5nQ29uZmlnJztcbmltcG9ydCBBbmltYXRpb24gZnJvbSAnLi9BbmltYXRpb24nO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuXG5leHBvcnQgdHlwZSBTcHJpbmdBbmltYXRpb25Db25maWcgPSB7XG4gIC4uLkFuaW1hdGlvbkNvbmZpZyxcbiAgdG9WYWx1ZTpcbiAgICB8IG51bWJlclxuICAgIHwgQW5pbWF0ZWRWYWx1ZVxuICAgIHwge1xuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgLi4uXG4gICAgICB9XG4gICAgfCBBbmltYXRlZFZhbHVlWFlcbiAgICB8IHtcbiAgICAgICAgcjogbnVtYmVyLFxuICAgICAgICBnOiBudW1iZXIsXG4gICAgICAgIGI6IG51bWJlcixcbiAgICAgICAgYTogbnVtYmVyLFxuICAgICAgICAuLi5cbiAgICAgIH1cbiAgICB8IEFuaW1hdGVkQ29sb3JcbiAgICB8IEFuaW1hdGVkSW50ZXJwb2xhdGlvbjxudW1iZXI+LFxuICBvdmVyc2hvb3RDbGFtcGluZz86IGJvb2xlYW4sXG4gIHJlc3REaXNwbGFjZW1lbnRUaHJlc2hvbGQ/OiBudW1iZXIsXG4gIHJlc3RTcGVlZFRocmVzaG9sZD86IG51bWJlcixcbiAgdmVsb2NpdHk/OlxuICAgIHwgbnVtYmVyXG4gICAgfCB7XG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICAuLi5cbiAgICAgIH0sXG4gIGJvdW5jaW5lc3M/OiBudW1iZXIsXG4gIHNwZWVkPzogbnVtYmVyLFxuICB0ZW5zaW9uPzogbnVtYmVyLFxuICBmcmljdGlvbj86IG51bWJlcixcbiAgc3RpZmZuZXNzPzogbnVtYmVyLFxuICBkYW1waW5nPzogbnVtYmVyLFxuICBtYXNzPzogbnVtYmVyLFxuICBkZWxheT86IG51bWJlcixcbn07XG5cbmV4cG9ydCB0eXBlIFNwcmluZ0FuaW1hdGlvbkNvbmZpZ1NpbmdsZSA9IHtcbiAgLi4uQW5pbWF0aW9uQ29uZmlnLFxuICB0b1ZhbHVlOiBudW1iZXIsXG4gIG92ZXJzaG9vdENsYW1waW5nPzogYm9vbGVhbixcbiAgcmVzdERpc3BsYWNlbWVudFRocmVzaG9sZD86IG51bWJlcixcbiAgcmVzdFNwZWVkVGhyZXNob2xkPzogbnVtYmVyLFxuICB2ZWxvY2l0eT86IG51bWJlcixcbiAgYm91bmNpbmVzcz86IG51bWJlcixcbiAgc3BlZWQ/OiBudW1iZXIsXG4gIHRlbnNpb24/OiBudW1iZXIsXG4gIGZyaWN0aW9uPzogbnVtYmVyLFxuICBzdGlmZm5lc3M/OiBudW1iZXIsXG4gIGRhbXBpbmc/OiBudW1iZXIsXG4gIG1hc3M/OiBudW1iZXIsXG4gIGRlbGF5PzogbnVtYmVyLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3ByaW5nQW5pbWF0aW9uIGV4dGVuZHMgQW5pbWF0aW9uIHtcbiAgX292ZXJzaG9vdENsYW1waW5nOiBib29sZWFuO1xuICBfcmVzdERpc3BsYWNlbWVudFRocmVzaG9sZDogbnVtYmVyO1xuICBfcmVzdFNwZWVkVGhyZXNob2xkOiBudW1iZXI7XG4gIF9sYXN0VmVsb2NpdHk6IG51bWJlcjtcbiAgX3N0YXJ0UG9zaXRpb246IG51bWJlcjtcbiAgX2xhc3RQb3NpdGlvbjogbnVtYmVyO1xuICBfZnJvbVZhbHVlOiBudW1iZXI7XG4gIF90b1ZhbHVlOiBudW1iZXI7XG4gIF9zdGlmZm5lc3M6IG51bWJlcjtcbiAgX2RhbXBpbmc6IG51bWJlcjtcbiAgX21hc3M6IG51bWJlcjtcbiAgX2luaXRpYWxWZWxvY2l0eTogbnVtYmVyO1xuICBfZGVsYXk6IG51bWJlcjtcbiAgX3RpbWVvdXQ6IGFueTtcbiAgX3N0YXJ0VGltZTogbnVtYmVyO1xuICBfbGFzdFRpbWU6IG51bWJlcjtcbiAgX2ZyYW1lVGltZTogbnVtYmVyO1xuICBfb25VcGRhdGU6ICh2YWx1ZTogbnVtYmVyKSA9PiB2b2lkO1xuICBfYW5pbWF0aW9uRnJhbWU6IGFueTtcbiAgX3VzZU5hdGl2ZURyaXZlcjogYm9vbGVhbjtcbiAgX3BsYXRmb3JtQ29uZmlnOiA/UGxhdGZvcm1Db25maWc7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBTcHJpbmdBbmltYXRpb25Db25maWdTaW5nbGUpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fb3ZlcnNob290Q2xhbXBpbmcgPSBjb25maWcub3ZlcnNob290Q2xhbXBpbmcgPz8gZmFsc2U7XG4gICAgdGhpcy5fcmVzdERpc3BsYWNlbWVudFRocmVzaG9sZCA9IGNvbmZpZy5yZXN0RGlzcGxhY2VtZW50VGhyZXNob2xkID8/IDAuMDAxO1xuICAgIHRoaXMuX3Jlc3RTcGVlZFRocmVzaG9sZCA9IGNvbmZpZy5yZXN0U3BlZWRUaHJlc2hvbGQgPz8gMC4wMDE7XG4gICAgdGhpcy5faW5pdGlhbFZlbG9jaXR5ID0gY29uZmlnLnZlbG9jaXR5ID8/IDA7XG4gICAgdGhpcy5fbGFzdFZlbG9jaXR5ID0gY29uZmlnLnZlbG9jaXR5ID8/IDA7XG4gICAgdGhpcy5fdG9WYWx1ZSA9IGNvbmZpZy50b1ZhbHVlO1xuICAgIHRoaXMuX2RlbGF5ID0gY29uZmlnLmRlbGF5ID8/IDA7XG4gICAgdGhpcy5fdXNlTmF0aXZlRHJpdmVyID0gTmF0aXZlQW5pbWF0ZWRIZWxwZXIuc2hvdWxkVXNlTmF0aXZlRHJpdmVyKGNvbmZpZyk7XG4gICAgdGhpcy5fcGxhdGZvcm1Db25maWcgPSBjb25maWcucGxhdGZvcm1Db25maWc7XG4gICAgdGhpcy5fX2lzSW50ZXJhY3Rpb24gPSBjb25maWcuaXNJbnRlcmFjdGlvbiA/PyAhdGhpcy5fdXNlTmF0aXZlRHJpdmVyO1xuICAgIHRoaXMuX19pdGVyYXRpb25zID0gY29uZmlnLml0ZXJhdGlvbnMgPz8gMTtcblxuICAgIGlmIChcbiAgICAgIGNvbmZpZy5zdGlmZm5lc3MgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgY29uZmlnLmRhbXBpbmcgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgY29uZmlnLm1hc3MgIT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICBjb25maWcuYm91bmNpbmVzcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgY29uZmlnLnNwZWVkID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICBjb25maWcudGVuc2lvbiA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgY29uZmlnLmZyaWN0aW9uID09PSB1bmRlZmluZWQsXG4gICAgICAgICdZb3UgY2FuIGRlZmluZSBvbmUgb2YgYm91bmNpbmVzcy9zcGVlZCwgdGVuc2lvbi9mcmljdGlvbiwgb3Igc3RpZmZuZXNzL2RhbXBpbmcvbWFzcywgYnV0IG5vdCBtb3JlIHRoYW4gb25lJyxcbiAgICAgICk7XG4gICAgICB0aGlzLl9zdGlmZm5lc3MgPSBjb25maWcuc3RpZmZuZXNzID8/IDEwMDtcbiAgICAgIHRoaXMuX2RhbXBpbmcgPSBjb25maWcuZGFtcGluZyA/PyAxMDtcbiAgICAgIHRoaXMuX21hc3MgPSBjb25maWcubWFzcyA/PyAxO1xuICAgIH0gZWxzZSBpZiAoY29uZmlnLmJvdW5jaW5lc3MgIT09IHVuZGVmaW5lZCB8fCBjb25maWcuc3BlZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQ29udmVydCB0aGUgb3JpZ2FtaSBib3VuY2luZXNzL3NwZWVkIHZhbHVlcyB0byBzdGlmZm5lc3MvZGFtcGluZ1xuICAgICAgLy8gV2UgYXNzdW1lIG1hc3MgaXMgMS5cbiAgICAgIGludmFyaWFudChcbiAgICAgICAgY29uZmlnLnRlbnNpb24gPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIGNvbmZpZy5mcmljdGlvbiA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgY29uZmlnLnN0aWZmbmVzcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgY29uZmlnLmRhbXBpbmcgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIGNvbmZpZy5tYXNzID09PSB1bmRlZmluZWQsXG4gICAgICAgICdZb3UgY2FuIGRlZmluZSBvbmUgb2YgYm91bmNpbmVzcy9zcGVlZCwgdGVuc2lvbi9mcmljdGlvbiwgb3Igc3RpZmZuZXNzL2RhbXBpbmcvbWFzcywgYnV0IG5vdCBtb3JlIHRoYW4gb25lJyxcbiAgICAgICk7XG4gICAgICBjb25zdCBzcHJpbmdDb25maWcgPSBTcHJpbmdDb25maWcuZnJvbUJvdW5jaW5lc3NBbmRTcGVlZChcbiAgICAgICAgY29uZmlnLmJvdW5jaW5lc3MgPz8gOCxcbiAgICAgICAgY29uZmlnLnNwZWVkID8/IDEyLFxuICAgICAgKTtcbiAgICAgIHRoaXMuX3N0aWZmbmVzcyA9IHNwcmluZ0NvbmZpZy5zdGlmZm5lc3M7XG4gICAgICB0aGlzLl9kYW1waW5nID0gc3ByaW5nQ29uZmlnLmRhbXBpbmc7XG4gICAgICB0aGlzLl9tYXNzID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ29udmVydCB0aGUgb3JpZ2FtaSB0ZW5zaW9uL2ZyaWN0aW9uIHZhbHVlcyB0byBzdGlmZm5lc3MvZGFtcGluZ1xuICAgICAgLy8gV2UgYXNzdW1lIG1hc3MgaXMgMS5cbiAgICAgIGNvbnN0IHNwcmluZ0NvbmZpZyA9IFNwcmluZ0NvbmZpZy5mcm9tT3JpZ2FtaVRlbnNpb25BbmRGcmljdGlvbihcbiAgICAgICAgY29uZmlnLnRlbnNpb24gPz8gNDAsXG4gICAgICAgIGNvbmZpZy5mcmljdGlvbiA/PyA3LFxuICAgICAgKTtcbiAgICAgIHRoaXMuX3N0aWZmbmVzcyA9IHNwcmluZ0NvbmZpZy5zdGlmZm5lc3M7XG4gICAgICB0aGlzLl9kYW1waW5nID0gc3ByaW5nQ29uZmlnLmRhbXBpbmc7XG4gICAgICB0aGlzLl9tYXNzID0gMTtcbiAgICB9XG5cbiAgICBpbnZhcmlhbnQodGhpcy5fc3RpZmZuZXNzID4gMCwgJ1N0aWZmbmVzcyB2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7XG4gICAgaW52YXJpYW50KHRoaXMuX2RhbXBpbmcgPiAwLCAnRGFtcGluZyB2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7XG4gICAgaW52YXJpYW50KHRoaXMuX21hc3MgPiAwLCAnTWFzcyB2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7XG4gIH1cblxuICBfX2dldE5hdGl2ZUFuaW1hdGlvbkNvbmZpZygpOiB7fFxuICAgIGRhbXBpbmc6IG51bWJlcixcbiAgICBpbml0aWFsVmVsb2NpdHk6IG51bWJlcixcbiAgICBpdGVyYXRpb25zOiBudW1iZXIsXG4gICAgbWFzczogbnVtYmVyLFxuICAgIHBsYXRmb3JtQ29uZmlnOiA/UGxhdGZvcm1Db25maWcsXG4gICAgb3ZlcnNob290Q2xhbXBpbmc6IGJvb2xlYW4sXG4gICAgcmVzdERpc3BsYWNlbWVudFRocmVzaG9sZDogbnVtYmVyLFxuICAgIHJlc3RTcGVlZFRocmVzaG9sZDogbnVtYmVyLFxuICAgIHN0aWZmbmVzczogbnVtYmVyLFxuICAgIHRvVmFsdWU6IGFueSxcbiAgICB0eXBlOiAkVEVNUE9SQVJZJHN0cmluZzwnc3ByaW5nJz4sXG4gIHx9IHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3NwcmluZycsXG4gICAgICBvdmVyc2hvb3RDbGFtcGluZzogdGhpcy5fb3ZlcnNob290Q2xhbXBpbmcsXG4gICAgICByZXN0RGlzcGxhY2VtZW50VGhyZXNob2xkOiB0aGlzLl9yZXN0RGlzcGxhY2VtZW50VGhyZXNob2xkLFxuICAgICAgcmVzdFNwZWVkVGhyZXNob2xkOiB0aGlzLl9yZXN0U3BlZWRUaHJlc2hvbGQsXG4gICAgICBzdGlmZm5lc3M6IHRoaXMuX3N0aWZmbmVzcyxcbiAgICAgIGRhbXBpbmc6IHRoaXMuX2RhbXBpbmcsXG4gICAgICBtYXNzOiB0aGlzLl9tYXNzLFxuICAgICAgaW5pdGlhbFZlbG9jaXR5OiB0aGlzLl9pbml0aWFsVmVsb2NpdHkgPz8gdGhpcy5fbGFzdFZlbG9jaXR5LFxuICAgICAgdG9WYWx1ZTogdGhpcy5fdG9WYWx1ZSxcbiAgICAgIGl0ZXJhdGlvbnM6IHRoaXMuX19pdGVyYXRpb25zLFxuICAgICAgcGxhdGZvcm1Db25maWc6IHRoaXMuX3BsYXRmb3JtQ29uZmlnLFxuICAgIH07XG4gIH1cblxuICBzdGFydChcbiAgICBmcm9tVmFsdWU6IG51bWJlcixcbiAgICBvblVwZGF0ZTogKHZhbHVlOiBudW1iZXIpID0+IHZvaWQsXG4gICAgb25FbmQ6ID9FbmRDYWxsYmFjayxcbiAgICBwcmV2aW91c0FuaW1hdGlvbjogP0FuaW1hdGlvbixcbiAgICBhbmltYXRlZFZhbHVlOiBBbmltYXRlZFZhbHVlLFxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9fYWN0aXZlID0gdHJ1ZTtcbiAgICB0aGlzLl9zdGFydFBvc2l0aW9uID0gZnJvbVZhbHVlO1xuICAgIHRoaXMuX2xhc3RQb3NpdGlvbiA9IHRoaXMuX3N0YXJ0UG9zaXRpb247XG5cbiAgICB0aGlzLl9vblVwZGF0ZSA9IG9uVXBkYXRlO1xuICAgIHRoaXMuX19vbkVuZCA9IG9uRW5kO1xuICAgIHRoaXMuX2xhc3RUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLl9mcmFtZVRpbWUgPSAwLjA7XG5cbiAgICBpZiAocHJldmlvdXNBbmltYXRpb24gaW5zdGFuY2VvZiBTcHJpbmdBbmltYXRpb24pIHtcbiAgICAgIGNvbnN0IGludGVybmFsU3RhdGUgPSBwcmV2aW91c0FuaW1hdGlvbi5nZXRJbnRlcm5hbFN0YXRlKCk7XG4gICAgICB0aGlzLl9sYXN0UG9zaXRpb24gPSBpbnRlcm5hbFN0YXRlLmxhc3RQb3NpdGlvbjtcbiAgICAgIHRoaXMuX2xhc3RWZWxvY2l0eSA9IGludGVybmFsU3RhdGUubGFzdFZlbG9jaXR5O1xuICAgICAgLy8gU2V0IHRoZSBpbml0aWFsIHZlbG9jaXR5IHRvIHRoZSBsYXN0IHZlbG9jaXR5XG4gICAgICB0aGlzLl9pbml0aWFsVmVsb2NpdHkgPSB0aGlzLl9sYXN0VmVsb2NpdHk7XG4gICAgICB0aGlzLl9sYXN0VGltZSA9IGludGVybmFsU3RhdGUubGFzdFRpbWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnQgPSAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fdXNlTmF0aXZlRHJpdmVyKSB7XG4gICAgICAgIHRoaXMuX19zdGFydE5hdGl2ZUFuaW1hdGlvbihhbmltYXRlZFZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25VcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gIElmIHRoaXMuX2RlbGF5IGlzIG1vcmUgdGhhbiAwLCB3ZSBzdGFydCBhZnRlciB0aGUgdGltZW91dC5cbiAgICBpZiAodGhpcy5fZGVsYXkpIHtcbiAgICAgIHRoaXMuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KHN0YXJ0LCB0aGlzLl9kZWxheSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXJ0KCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0SW50ZXJuYWxTdGF0ZSgpOiBPYmplY3Qge1xuICAgIHJldHVybiB7XG4gICAgICBsYXN0UG9zaXRpb246IHRoaXMuX2xhc3RQb3NpdGlvbixcbiAgICAgIGxhc3RWZWxvY2l0eTogdGhpcy5fbGFzdFZlbG9jaXR5LFxuICAgICAgbGFzdFRpbWU6IHRoaXMuX2xhc3RUaW1lLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBzcHJpbmcgbW9kZWwgaXMgYmFzZWQgb2ZmIG9mIGEgZGFtcGVkIGhhcm1vbmljIG9zY2lsbGF0b3JcbiAgICogKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hhcm1vbmljX29zY2lsbGF0b3IjRGFtcGVkX2hhcm1vbmljX29zY2lsbGF0b3IpLlxuICAgKlxuICAgKiBXZSB1c2UgdGhlIGNsb3NlZCBmb3JtIG9mIHRoZSBzZWNvbmQgb3JkZXIgZGlmZmVyZW50aWFsIGVxdWF0aW9uOlxuICAgKlxuICAgKiB4JycgKyAoMs624o21XzApeCcgKyDijbVeMnggPSAwXG4gICAqXG4gICAqIHdoZXJlXG4gICAqICAgIOKNtV8wID0g4oiaKGsgLyBtKSAodW5kYW1wZWQgYW5ndWxhciBmcmVxdWVuY3kgb2YgdGhlIG9zY2lsbGF0b3IpLFxuICAgKiAgICDOtiA9IGMgLyAy4oiabWsgKGRhbXBpbmcgcmF0aW8pLFxuICAgKiAgICBjID0gZGFtcGluZyBjb25zdGFudFxuICAgKiAgICBrID0gc3RpZmZuZXNzXG4gICAqICAgIG0gPSBtYXNzXG4gICAqXG4gICAqIFRoZSBkZXJpdmF0aW9uIG9mIHRoZSBjbG9zZWQgZm9ybSBpcyBkZXNjcmliZWQgaW4gZGV0YWlsIGhlcmU6XG4gICAqIGh0dHA6Ly9wbGFuZXRtYXRoLm9yZy9zaXRlcy9kZWZhdWx0L2ZpbGVzL3RleHBkZi8zOTc0NS5wZGZcbiAgICpcbiAgICogVGhpcyBhbGdvcml0aG0gaGFwcGVucyB0byBtYXRjaCB0aGUgYWxnb3JpdGhtIHVzZWQgYnkgQ0FTcHJpbmdBbmltYXRpb24sXG4gICAqIGEgUXVhcnR6Q29yZSAoaU9TKSBBUEkgdGhhdCBjcmVhdGVzIHNwcmluZyBhbmltYXRpb25zLlxuICAgKi9cbiAgb25VcGRhdGUoKTogdm9pZCB7XG4gICAgLy8gSWYgZm9yIHNvbWUgcmVhc29uIHdlIGxvc3QgYSBsb3Qgb2YgZnJhbWVzIChlLmcuIHByb2Nlc3MgbGFyZ2UgcGF5bG9hZCBvclxuICAgIC8vIHN0b3BwZWQgaW4gdGhlIGRlYnVnZ2VyKSwgd2Ugb25seSBhZHZhbmNlIGJ5IDQgZnJhbWVzIHdvcnRoIG9mXG4gICAgLy8gY29tcHV0YXRpb24gYW5kIHdpbGwgY29udGludWUgb24gdGhlIG5leHQgZnJhbWUuIEl0J3MgYmV0dGVyIHRvIGhhdmUgaXRcbiAgICAvLyBydW5uaW5nIGF0IGZhc3RlciBzcGVlZCB0aGFuIGp1bXBpbmcgdG8gdGhlIGVuZC5cbiAgICBjb25zdCBNQVhfU1RFUFMgPSA2NDtcbiAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAobm93ID4gdGhpcy5fbGFzdFRpbWUgKyBNQVhfU1RFUFMpIHtcbiAgICAgIG5vdyA9IHRoaXMuX2xhc3RUaW1lICsgTUFYX1NURVBTO1xuICAgIH1cblxuICAgIGNvbnN0IGRlbHRhVGltZSA9IChub3cgLSB0aGlzLl9sYXN0VGltZSkgLyAxMDAwO1xuICAgIHRoaXMuX2ZyYW1lVGltZSArPSBkZWx0YVRpbWU7XG5cbiAgICBjb25zdCBjOiBudW1iZXIgPSB0aGlzLl9kYW1waW5nO1xuICAgIGNvbnN0IG06IG51bWJlciA9IHRoaXMuX21hc3M7XG4gICAgY29uc3QgazogbnVtYmVyID0gdGhpcy5fc3RpZmZuZXNzO1xuICAgIGNvbnN0IHYwOiBudW1iZXIgPSAtdGhpcy5faW5pdGlhbFZlbG9jaXR5O1xuXG4gICAgY29uc3QgemV0YSA9IGMgLyAoMiAqIE1hdGguc3FydChrICogbSkpOyAvLyBkYW1waW5nIHJhdGlvXG4gICAgY29uc3Qgb21lZ2EwID0gTWF0aC5zcXJ0KGsgLyBtKTsgLy8gdW5kYW1wZWQgYW5ndWxhciBmcmVxdWVuY3kgb2YgdGhlIG9zY2lsbGF0b3IgKHJhZC9tcylcbiAgICBjb25zdCBvbWVnYTEgPSBvbWVnYTAgKiBNYXRoLnNxcnQoMS4wIC0gemV0YSAqIHpldGEpOyAvLyBleHBvbmVudGlhbCBkZWNheVxuICAgIGNvbnN0IHgwID0gdGhpcy5fdG9WYWx1ZSAtIHRoaXMuX3N0YXJ0UG9zaXRpb247IC8vIGNhbGN1bGF0ZSB0aGUgb3NjaWxsYXRpb24gZnJvbSB4MCA9IDEgdG8geCA9IDBcblxuICAgIGxldCBwb3NpdGlvbiA9IDAuMDtcbiAgICBsZXQgdmVsb2NpdHkgPSAwLjA7XG4gICAgY29uc3QgdCA9IHRoaXMuX2ZyYW1lVGltZTtcbiAgICBpZiAoemV0YSA8IDEpIHtcbiAgICAgIC8vIFVuZGVyIGRhbXBlZFxuICAgICAgY29uc3QgZW52ZWxvcGUgPSBNYXRoLmV4cCgtemV0YSAqIG9tZWdhMCAqIHQpO1xuICAgICAgcG9zaXRpb24gPVxuICAgICAgICB0aGlzLl90b1ZhbHVlIC1cbiAgICAgICAgZW52ZWxvcGUgKlxuICAgICAgICAgICgoKHYwICsgemV0YSAqIG9tZWdhMCAqIHgwKSAvIG9tZWdhMSkgKiBNYXRoLnNpbihvbWVnYTEgKiB0KSArXG4gICAgICAgICAgICB4MCAqIE1hdGguY29zKG9tZWdhMSAqIHQpKTtcbiAgICAgIC8vIFRoaXMgbG9va3MgY3JhenkgLS0gaXQncyBhY3R1YWxseSBqdXN0IHRoZSBkZXJpdmF0aXZlIG9mIHRoZVxuICAgICAgLy8gb3NjaWxsYXRpb24gZnVuY3Rpb25cbiAgICAgIHZlbG9jaXR5ID1cbiAgICAgICAgemV0YSAqXG4gICAgICAgICAgb21lZ2EwICpcbiAgICAgICAgICBlbnZlbG9wZSAqXG4gICAgICAgICAgKChNYXRoLnNpbihvbWVnYTEgKiB0KSAqICh2MCArIHpldGEgKiBvbWVnYTAgKiB4MCkpIC8gb21lZ2ExICtcbiAgICAgICAgICAgIHgwICogTWF0aC5jb3Mob21lZ2ExICogdCkpIC1cbiAgICAgICAgZW52ZWxvcGUgKlxuICAgICAgICAgIChNYXRoLmNvcyhvbWVnYTEgKiB0KSAqICh2MCArIHpldGEgKiBvbWVnYTAgKiB4MCkgLVxuICAgICAgICAgICAgb21lZ2ExICogeDAgKiBNYXRoLnNpbihvbWVnYTEgKiB0KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENyaXRpY2FsbHkgZGFtcGVkXG4gICAgICBjb25zdCBlbnZlbG9wZSA9IE1hdGguZXhwKC1vbWVnYTAgKiB0KTtcbiAgICAgIHBvc2l0aW9uID0gdGhpcy5fdG9WYWx1ZSAtIGVudmVsb3BlICogKHgwICsgKHYwICsgb21lZ2EwICogeDApICogdCk7XG4gICAgICB2ZWxvY2l0eSA9XG4gICAgICAgIGVudmVsb3BlICogKHYwICogKHQgKiBvbWVnYTAgLSAxKSArIHQgKiB4MCAqIChvbWVnYTAgKiBvbWVnYTApKTtcbiAgICB9XG5cbiAgICB0aGlzLl9sYXN0VGltZSA9IG5vdztcbiAgICB0aGlzLl9sYXN0UG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICB0aGlzLl9sYXN0VmVsb2NpdHkgPSB2ZWxvY2l0eTtcblxuICAgIHRoaXMuX29uVXBkYXRlKHBvc2l0aW9uKTtcbiAgICBpZiAoIXRoaXMuX19hY3RpdmUpIHtcbiAgICAgIC8vIGEgbGlzdGVuZXIgbWlnaHQgaGF2ZSBzdG9wcGVkIHVzIGluIF9vblVwZGF0ZVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENvbmRpdGlvbnMgZm9yIHN0b3BwaW5nIHRoZSBzcHJpbmcgYW5pbWF0aW9uXG4gICAgbGV0IGlzT3ZlcnNob290aW5nID0gZmFsc2U7XG4gICAgaWYgKHRoaXMuX292ZXJzaG9vdENsYW1waW5nICYmIHRoaXMuX3N0aWZmbmVzcyAhPT0gMCkge1xuICAgICAgaWYgKHRoaXMuX3N0YXJ0UG9zaXRpb24gPCB0aGlzLl90b1ZhbHVlKSB7XG4gICAgICAgIGlzT3ZlcnNob290aW5nID0gcG9zaXRpb24gPiB0aGlzLl90b1ZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNPdmVyc2hvb3RpbmcgPSBwb3NpdGlvbiA8IHRoaXMuX3RvVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGlzVmVsb2NpdHkgPSBNYXRoLmFicyh2ZWxvY2l0eSkgPD0gdGhpcy5fcmVzdFNwZWVkVGhyZXNob2xkO1xuICAgIGxldCBpc0Rpc3BsYWNlbWVudCA9IHRydWU7XG4gICAgaWYgKHRoaXMuX3N0aWZmbmVzcyAhPT0gMCkge1xuICAgICAgaXNEaXNwbGFjZW1lbnQgPVxuICAgICAgICBNYXRoLmFicyh0aGlzLl90b1ZhbHVlIC0gcG9zaXRpb24pIDw9IHRoaXMuX3Jlc3REaXNwbGFjZW1lbnRUaHJlc2hvbGQ7XG4gICAgfVxuXG4gICAgaWYgKGlzT3ZlcnNob290aW5nIHx8IChpc1ZlbG9jaXR5ICYmIGlzRGlzcGxhY2VtZW50KSkge1xuICAgICAgaWYgKHRoaXMuX3N0aWZmbmVzcyAhPT0gMCkge1xuICAgICAgICAvLyBFbnN1cmUgdGhhdCB3ZSBlbmQgdXAgd2l0aCBhIHJvdW5kIHZhbHVlXG4gICAgICAgIHRoaXMuX2xhc3RQb3NpdGlvbiA9IHRoaXMuX3RvVmFsdWU7XG4gICAgICAgIHRoaXMuX2xhc3RWZWxvY2l0eSA9IDA7XG4gICAgICAgIHRoaXMuX29uVXBkYXRlKHRoaXMuX3RvVmFsdWUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9fZGVib3VuY2VkT25FbmQoe2ZpbmlzaGVkOiB0cnVlfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vICRGbG93Rml4TWVbbWV0aG9kLXVuYmluZGluZ10gYWRkZWQgd2hlbiBpbXByb3ZpbmcgdHlwaW5nIGZvciB0aGlzIHBhcmFtZXRlcnNcbiAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLm9uVXBkYXRlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgc3RvcCgpOiB2b2lkIHtcbiAgICBzdXBlci5zdG9wKCk7XG4gICAgdGhpcy5fX2FjdGl2ZSA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgICBnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uRnJhbWUpO1xuICAgIHRoaXMuX19kZWJvdW5jZWRPbkVuZCh7ZmluaXNoZWQ6IGZhbHNlfSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBVUEsWUFBWTs7QUFBQyxJQUFBQSxzQkFBQSxHQUFBQyxPQUFBO0FBQUFDLE1BQUEsQ0FBQUMsY0FBQSxDQUFBQyxPQUFBO0VBQUFDLEtBQUE7QUFBQTtBQUFBRCxPQUFBLENBQUFFLE9BQUE7QUFBQSxJQUFBQyxnQkFBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQU8sYUFBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQVEsS0FBQSxHQUFBVCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQVMsVUFBQSxHQUFBVixzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQVUsMkJBQUEsR0FBQVgsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFXLGdCQUFBLEdBQUFaLHNCQUFBLENBQUFDLE9BQUE7QUFRYixJQUFBWSxxQkFBQSxHQUFBYixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQWEsY0FBQSxHQUFBZCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQWMsWUFBQSxHQUFBQyx1QkFBQSxDQUFBZixPQUFBO0FBQ0EsSUFBQWdCLFdBQUEsR0FBQWpCLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBaUIsVUFBQSxHQUFBbEIsc0JBQUEsQ0FBQUMsT0FBQTtBQUFrQyxTQUFBa0IseUJBQUFDLFdBQUEsZUFBQUMsT0FBQSxrQ0FBQUMsaUJBQUEsT0FBQUQsT0FBQSxRQUFBRSxnQkFBQSxPQUFBRixPQUFBLFlBQUFGLHdCQUFBLFlBQUFBLHlCQUFBQyxXQUFBLFdBQUFBLFdBQUEsR0FBQUcsZ0JBQUEsR0FBQUQsaUJBQUEsS0FBQUYsV0FBQTtBQUFBLFNBQUFKLHdCQUFBUSxHQUFBLEVBQUFKLFdBQUEsU0FBQUEsV0FBQSxJQUFBSSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxXQUFBRCxHQUFBLFFBQUFBLEdBQUEsb0JBQUFBLEdBQUEsd0JBQUFBLEdBQUEsNEJBQUFsQixPQUFBLEVBQUFrQixHQUFBLFVBQUFFLEtBQUEsR0FBQVAsd0JBQUEsQ0FBQUMsV0FBQSxPQUFBTSxLQUFBLElBQUFBLEtBQUEsQ0FBQUMsR0FBQSxDQUFBSCxHQUFBLFlBQUFFLEtBQUEsQ0FBQUUsR0FBQSxDQUFBSixHQUFBLFNBQUFLLE1BQUEsV0FBQUMscUJBQUEsR0FBQTVCLE1BQUEsQ0FBQUMsY0FBQSxJQUFBRCxNQUFBLENBQUE2Qix3QkFBQSxXQUFBQyxHQUFBLElBQUFSLEdBQUEsUUFBQVEsR0FBQSxrQkFBQTlCLE1BQUEsQ0FBQStCLFNBQUEsQ0FBQUMsY0FBQSxDQUFBQyxJQUFBLENBQUFYLEdBQUEsRUFBQVEsR0FBQSxTQUFBSSxJQUFBLEdBQUFOLHFCQUFBLEdBQUE1QixNQUFBLENBQUE2Qix3QkFBQSxDQUFBUCxHQUFBLEVBQUFRLEdBQUEsY0FBQUksSUFBQSxLQUFBQSxJQUFBLENBQUFSLEdBQUEsSUFBQVEsSUFBQSxDQUFBQyxHQUFBLEtBQUFuQyxNQUFBLENBQUFDLGNBQUEsQ0FBQTBCLE1BQUEsRUFBQUcsR0FBQSxFQUFBSSxJQUFBLFlBQUFQLE1BQUEsQ0FBQUcsR0FBQSxJQUFBUixHQUFBLENBQUFRLEdBQUEsU0FBQUgsTUFBQSxDQUFBdkIsT0FBQSxHQUFBa0IsR0FBQSxNQUFBRSxLQUFBLElBQUFBLEtBQUEsQ0FBQVcsR0FBQSxDQUFBYixHQUFBLEVBQUFLLE1BQUEsWUFBQUEsTUFBQTtBQUFBLFNBQUFTLGFBQUFDLE9BQUEsUUFBQUMseUJBQUEsR0FBQUMseUJBQUEsb0JBQUFDLHFCQUFBLFFBQUFDLEtBQUEsT0FBQS9CLGdCQUFBLENBQUFOLE9BQUEsRUFBQWlDLE9BQUEsR0FBQUssTUFBQSxNQUFBSix5QkFBQSxRQUFBSyxTQUFBLE9BQUFqQyxnQkFBQSxDQUFBTixPQUFBLFFBQUF3QyxXQUFBLEVBQUFGLE1BQUEsR0FBQUcsT0FBQSxDQUFBQyxTQUFBLENBQUFMLEtBQUEsRUFBQU0sU0FBQSxFQUFBSixTQUFBLFlBQUFELE1BQUEsR0FBQUQsS0FBQSxDQUFBTyxLQUFBLE9BQUFELFNBQUEsZ0JBQUF0QywyQkFBQSxDQUFBTCxPQUFBLFFBQUFzQyxNQUFBO0FBQUEsU0FBQUgsMEJBQUEsZUFBQU0sT0FBQSxxQkFBQUEsT0FBQSxDQUFBQyxTQUFBLG9CQUFBRCxPQUFBLENBQUFDLFNBQUEsQ0FBQUcsSUFBQSwyQkFBQUMsS0FBQSxvQ0FBQUMsT0FBQSxDQUFBcEIsU0FBQSxDQUFBcUIsT0FBQSxDQUFBbkIsSUFBQSxDQUFBWSxPQUFBLENBQUFDLFNBQUEsQ0FBQUssT0FBQSw4Q0FBQUUsQ0FBQTtBQUFBLElBMkRiQyxlQUFlLGFBQUFDLFVBQUE7RUFBQSxJQUFBL0MsVUFBQSxDQUFBSixPQUFBLEVBQUFrRCxlQUFBLEVBQUFDLFVBQUE7RUFBQSxJQUFBQyxNQUFBLEdBQUFwQixZQUFBLENBQUFrQixlQUFBO0VBdUJsQyxTQUFBQSxnQkFBWUcsTUFBbUMsRUFBRTtJQUFBLElBQUFDLHFCQUFBLEVBQUFDLHFCQUFBLEVBQUFDLHFCQUFBLEVBQUFDLGdCQUFBLEVBQUFDLGlCQUFBLEVBQUFDLGFBQUEsRUFBQUMscUJBQUEsRUFBQUMsa0JBQUE7SUFBQSxJQUFBQyxLQUFBO0lBQUEsSUFBQTdELGdCQUFBLENBQUFELE9BQUEsUUFBQWtELGVBQUE7SUFDL0NZLEtBQUEsR0FBQVYsTUFBQSxDQUFBdkIsSUFBQTtJQUVBaUMsS0FBQSxDQUFLQyxrQkFBa0IsSUFBQVQscUJBQUEsR0FBR0QsTUFBTSxDQUFDVyxpQkFBaUIsWUFBQVYscUJBQUEsR0FBSSxLQUFLO0lBQzNEUSxLQUFBLENBQUtHLDBCQUEwQixJQUFBVixxQkFBQSxHQUFHRixNQUFNLENBQUNhLHlCQUF5QixZQUFBWCxxQkFBQSxHQUFJLEtBQUs7SUFDM0VPLEtBQUEsQ0FBS0ssbUJBQW1CLElBQUFYLHFCQUFBLEdBQUdILE1BQU0sQ0FBQ2Usa0JBQWtCLFlBQUFaLHFCQUFBLEdBQUksS0FBSztJQUM3RE0sS0FBQSxDQUFLTyxnQkFBZ0IsSUFBQVosZ0JBQUEsR0FBR0osTUFBTSxDQUFDaUIsUUFBUSxZQUFBYixnQkFBQSxHQUFJLENBQUM7SUFDNUNLLEtBQUEsQ0FBS1MsYUFBYSxJQUFBYixpQkFBQSxHQUFHTCxNQUFNLENBQUNpQixRQUFRLFlBQUFaLGlCQUFBLEdBQUksQ0FBQztJQUN6Q0ksS0FBQSxDQUFLVSxRQUFRLEdBQUduQixNQUFNLENBQUNvQixPQUFPO0lBQzlCWCxLQUFBLENBQUtZLE1BQU0sSUFBQWYsYUFBQSxHQUFHTixNQUFNLENBQUNzQixLQUFLLFlBQUFoQixhQUFBLEdBQUksQ0FBQztJQUMvQkcsS0FBQSxDQUFLYyxnQkFBZ0IsR0FBR0MsNkJBQW9CLENBQUNDLHFCQUFxQixDQUFDekIsTUFBTSxDQUFDO0lBQzFFUyxLQUFBLENBQUtpQixlQUFlLEdBQUcxQixNQUFNLENBQUMyQixjQUFjO0lBQzVDbEIsS0FBQSxDQUFLbUIsZUFBZSxJQUFBckIscUJBQUEsR0FBR1AsTUFBTSxDQUFDNkIsYUFBYSxZQUFBdEIscUJBQUEsR0FBSSxDQUFDRSxLQUFBLENBQUtjLGdCQUFnQjtJQUNyRWQsS0FBQSxDQUFLcUIsWUFBWSxJQUFBdEIsa0JBQUEsR0FBR1IsTUFBTSxDQUFDK0IsVUFBVSxZQUFBdkIsa0JBQUEsR0FBSSxDQUFDO0lBRTFDLElBQ0VSLE1BQU0sQ0FBQ2dDLFNBQVMsS0FBS0MsU0FBUyxJQUM5QmpDLE1BQU0sQ0FBQ2tDLE9BQU8sS0FBS0QsU0FBUyxJQUM1QmpDLE1BQU0sQ0FBQ21DLElBQUksS0FBS0YsU0FBUyxFQUN6QjtNQUFBLElBQUFHLGlCQUFBLEVBQUFDLGVBQUEsRUFBQUMsWUFBQTtNQUNBLElBQUFDLGtCQUFTLEVBQ1B2QyxNQUFNLENBQUN3QyxVQUFVLEtBQUtQLFNBQVMsSUFDN0JqQyxNQUFNLENBQUN5QyxLQUFLLEtBQUtSLFNBQVMsSUFDMUJqQyxNQUFNLENBQUMwQyxPQUFPLEtBQUtULFNBQVMsSUFDNUJqQyxNQUFNLENBQUMyQyxRQUFRLEtBQUtWLFNBQVMsRUFDL0IsNEdBQ0YsQ0FBQztNQUNEeEIsS0FBQSxDQUFLbUMsVUFBVSxJQUFBUixpQkFBQSxHQUFHcEMsTUFBTSxDQUFDZ0MsU0FBUyxZQUFBSSxpQkFBQSxHQUFJLEdBQUc7TUFDekMzQixLQUFBLENBQUtvQyxRQUFRLElBQUFSLGVBQUEsR0FBR3JDLE1BQU0sQ0FBQ2tDLE9BQU8sWUFBQUcsZUFBQSxHQUFJLEVBQUU7TUFDcEM1QixLQUFBLENBQUtxQyxLQUFLLElBQUFSLFlBQUEsR0FBR3RDLE1BQU0sQ0FBQ21DLElBQUksWUFBQUcsWUFBQSxHQUFJLENBQUM7SUFDL0IsQ0FBQyxNQUFNLElBQUl0QyxNQUFNLENBQUN3QyxVQUFVLEtBQUtQLFNBQVMsSUFBSWpDLE1BQU0sQ0FBQ3lDLEtBQUssS0FBS1IsU0FBUyxFQUFFO01BQUEsSUFBQWMsa0JBQUEsRUFBQUMsYUFBQTtNQUd4RSxJQUFBVCxrQkFBUyxFQUNQdkMsTUFBTSxDQUFDMEMsT0FBTyxLQUFLVCxTQUFTLElBQzFCakMsTUFBTSxDQUFDMkMsUUFBUSxLQUFLVixTQUFTLElBQzdCakMsTUFBTSxDQUFDZ0MsU0FBUyxLQUFLQyxTQUFTLElBQzlCakMsTUFBTSxDQUFDa0MsT0FBTyxLQUFLRCxTQUFTLElBQzVCakMsTUFBTSxDQUFDbUMsSUFBSSxLQUFLRixTQUFTLEVBQzNCLDRHQUNGLENBQUM7TUFDRCxJQUFNZ0IsWUFBWSxHQUFHN0YsWUFBWSxDQUFDOEYsc0JBQXNCLEVBQUFILGtCQUFBLEdBQ3REL0MsTUFBTSxDQUFDd0MsVUFBVSxZQUFBTyxrQkFBQSxHQUFJLENBQUMsR0FBQUMsYUFBQSxHQUN0QmhELE1BQU0sQ0FBQ3lDLEtBQUssWUFBQU8sYUFBQSxHQUFJLEVBQ2xCLENBQUM7TUFDRHZDLEtBQUEsQ0FBS21DLFVBQVUsR0FBR0ssWUFBWSxDQUFDakIsU0FBUztNQUN4Q3ZCLEtBQUEsQ0FBS29DLFFBQVEsR0FBR0ksWUFBWSxDQUFDZixPQUFPO01BQ3BDekIsS0FBQSxDQUFLcUMsS0FBSyxHQUFHLENBQUM7SUFDaEIsQ0FBQyxNQUFNO01BQUEsSUFBQUssZUFBQSxFQUFBQyxnQkFBQTtNQUdMLElBQU1ILGFBQVksR0FBRzdGLFlBQVksQ0FBQ2lHLDZCQUE2QixFQUFBRixlQUFBLEdBQzdEbkQsTUFBTSxDQUFDMEMsT0FBTyxZQUFBUyxlQUFBLEdBQUksRUFBRSxHQUFBQyxnQkFBQSxHQUNwQnBELE1BQU0sQ0FBQzJDLFFBQVEsWUFBQVMsZ0JBQUEsR0FBSSxDQUNyQixDQUFDO01BQ0QzQyxLQUFBLENBQUttQyxVQUFVLEdBQUdLLGFBQVksQ0FBQ2pCLFNBQVM7TUFDeEN2QixLQUFBLENBQUtvQyxRQUFRLEdBQUdJLGFBQVksQ0FBQ2YsT0FBTztNQUNwQ3pCLEtBQUEsQ0FBS3FDLEtBQUssR0FBRyxDQUFDO0lBQ2hCO0lBRUEsSUFBQVAsa0JBQVMsRUFBQzlCLEtBQUEsQ0FBS21DLFVBQVUsR0FBRyxDQUFDLEVBQUUsd0NBQXdDLENBQUM7SUFDeEUsSUFBQUwsa0JBQVMsRUFBQzlCLEtBQUEsQ0FBS29DLFFBQVEsR0FBRyxDQUFDLEVBQUUsc0NBQXNDLENBQUM7SUFDcEUsSUFBQU4sa0JBQVMsRUFBQzlCLEtBQUEsQ0FBS3FDLEtBQUssR0FBRyxDQUFDLEVBQUUsbUNBQW1DLENBQUM7SUFBQyxPQUFBckMsS0FBQTtFQUNqRTtFQUFDLElBQUE1RCxhQUFBLENBQUFGLE9BQUEsRUFBQWtELGVBQUE7SUFBQXhCLEdBQUE7SUFBQTNCLEtBQUEsRUFFRCxTQUFBNEcsMkJBQUEsRUFZRztNQUFBLElBQUFDLHFCQUFBO01BQ0QsT0FBTztRQUNMQyxJQUFJLEVBQUUsUUFBUTtRQUNkN0MsaUJBQWlCLEVBQUUsSUFBSSxDQUFDRCxrQkFBa0I7UUFDMUNHLHlCQUF5QixFQUFFLElBQUksQ0FBQ0QsMEJBQTBCO1FBQzFERyxrQkFBa0IsRUFBRSxJQUFJLENBQUNELG1CQUFtQjtRQUM1Q2tCLFNBQVMsRUFBRSxJQUFJLENBQUNZLFVBQVU7UUFDMUJWLE9BQU8sRUFBRSxJQUFJLENBQUNXLFFBQVE7UUFDdEJWLElBQUksRUFBRSxJQUFJLENBQUNXLEtBQUs7UUFDaEJXLGVBQWUsR0FBQUYscUJBQUEsR0FBRSxJQUFJLENBQUN2QyxnQkFBZ0IsWUFBQXVDLHFCQUFBLEdBQUksSUFBSSxDQUFDckMsYUFBYTtRQUM1REUsT0FBTyxFQUFFLElBQUksQ0FBQ0QsUUFBUTtRQUN0QlksVUFBVSxFQUFFLElBQUksQ0FBQ0QsWUFBWTtRQUM3QkgsY0FBYyxFQUFFLElBQUksQ0FBQ0Q7TUFDdkIsQ0FBQztJQUNIO0VBQUM7SUFBQXJELEdBQUE7SUFBQTNCLEtBQUEsRUFFRCxTQUFBZ0gsTUFDRUMsU0FBaUIsRUFDakJDLFFBQWlDLEVBQ2pDQyxLQUFtQixFQUNuQkMsaUJBQTZCLEVBQzdCQyxhQUE0QixFQUN0QjtNQUFBLElBQUFDLE1BQUE7TUFDTixJQUFJLENBQUNDLFFBQVEsR0FBRyxJQUFJO01BQ3BCLElBQUksQ0FBQ0MsY0FBYyxHQUFHUCxTQUFTO01BQy9CLElBQUksQ0FBQ1EsYUFBYSxHQUFHLElBQUksQ0FBQ0QsY0FBYztNQUV4QyxJQUFJLENBQUNFLFNBQVMsR0FBR1IsUUFBUTtNQUN6QixJQUFJLENBQUNTLE9BQU8sR0FBR1IsS0FBSztNQUNwQixJQUFJLENBQUNTLFNBQVMsR0FBR0MsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQztNQUMzQixJQUFJLENBQUNDLFVBQVUsR0FBRyxHQUFHO01BRXJCLElBQUlYLGlCQUFpQixZQUFZakUsZUFBZSxFQUFFO1FBQ2hELElBQU02RSxhQUFhLEdBQUdaLGlCQUFpQixDQUFDYSxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQ1IsYUFBYSxHQUFHTyxhQUFhLENBQUNFLFlBQVk7UUFDL0MsSUFBSSxDQUFDMUQsYUFBYSxHQUFHd0QsYUFBYSxDQUFDRyxZQUFZO1FBRS9DLElBQUksQ0FBQzdELGdCQUFnQixHQUFHLElBQUksQ0FBQ0UsYUFBYTtRQUMxQyxJQUFJLENBQUNvRCxTQUFTLEdBQUdJLGFBQWEsQ0FBQ0ksUUFBUTtNQUN6QztNQUVBLElBQU1wQixLQUFLLEdBQUcsU0FBUkEsS0FBS0EsQ0FBQSxFQUFTO1FBQ2xCLElBQUlNLE1BQUksQ0FBQ3pDLGdCQUFnQixFQUFFO1VBQ3pCeUMsTUFBSSxDQUFDZSxzQkFBc0IsQ0FBQ2hCLGFBQWEsQ0FBQztRQUM1QyxDQUFDLE1BQU07VUFDTEMsTUFBSSxDQUFDSixRQUFRLENBQUMsQ0FBQztRQUNqQjtNQUNGLENBQUM7TUFHRCxJQUFJLElBQUksQ0FBQ3ZDLE1BQU0sRUFBRTtRQUNmLElBQUksQ0FBQzJELFFBQVEsR0FBR0MsVUFBVSxDQUFDdkIsS0FBSyxFQUFFLElBQUksQ0FBQ3JDLE1BQU0sQ0FBQztNQUNoRCxDQUFDLE1BQU07UUFDTHFDLEtBQUssQ0FBQyxDQUFDO01BQ1Q7SUFDRjtFQUFDO0lBQUFyRixHQUFBO0lBQUEzQixLQUFBLEVBRUQsU0FBQWlJLGlCQUFBLEVBQTJCO01BQ3pCLE9BQU87UUFDTEMsWUFBWSxFQUFFLElBQUksQ0FBQ1QsYUFBYTtRQUNoQ1UsWUFBWSxFQUFFLElBQUksQ0FBQzNELGFBQWE7UUFDaEM0RCxRQUFRLEVBQUUsSUFBSSxDQUFDUjtNQUNqQixDQUFDO0lBQ0g7RUFBQztJQUFBakcsR0FBQTtJQUFBM0IsS0FBQSxFQXVCRCxTQUFBa0gsU0FBQSxFQUFpQjtNQUtmLElBQU1zQixTQUFTLEdBQUcsRUFBRTtNQUNwQixJQUFJVixHQUFHLEdBQUdELElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7TUFDcEIsSUFBSUEsR0FBRyxHQUFHLElBQUksQ0FBQ0YsU0FBUyxHQUFHWSxTQUFTLEVBQUU7UUFDcENWLEdBQUcsR0FBRyxJQUFJLENBQUNGLFNBQVMsR0FBR1ksU0FBUztNQUNsQztNQUVBLElBQU1DLFNBQVMsR0FBRyxDQUFDWCxHQUFHLEdBQUcsSUFBSSxDQUFDRixTQUFTLElBQUksSUFBSTtNQUMvQyxJQUFJLENBQUNHLFVBQVUsSUFBSVUsU0FBUztNQUU1QixJQUFNQyxDQUFTLEdBQUcsSUFBSSxDQUFDdkMsUUFBUTtNQUMvQixJQUFNd0MsQ0FBUyxHQUFHLElBQUksQ0FBQ3ZDLEtBQUs7TUFDNUIsSUFBTXdDLENBQVMsR0FBRyxJQUFJLENBQUMxQyxVQUFVO01BQ2pDLElBQU0yQyxFQUFVLEdBQUcsQ0FBQyxJQUFJLENBQUN2RSxnQkFBZ0I7TUFFekMsSUFBTXdFLElBQUksR0FBR0osQ0FBQyxJQUFJLENBQUMsR0FBR0ssSUFBSSxDQUFDQyxJQUFJLENBQUNKLENBQUMsR0FBR0QsQ0FBQyxDQUFDLENBQUM7TUFDdkMsSUFBTU0sTUFBTSxHQUFHRixJQUFJLENBQUNDLElBQUksQ0FBQ0osQ0FBQyxHQUFHRCxDQUFDLENBQUM7TUFDL0IsSUFBTU8sTUFBTSxHQUFHRCxNQUFNLEdBQUdGLElBQUksQ0FBQ0MsSUFBSSxDQUFDLEdBQUcsR0FBR0YsSUFBSSxHQUFHQSxJQUFJLENBQUM7TUFDcEQsSUFBTUssRUFBRSxHQUFHLElBQUksQ0FBQzFFLFFBQVEsR0FBRyxJQUFJLENBQUMrQyxjQUFjO01BRTlDLElBQUk0QixRQUFRLEdBQUcsR0FBRztNQUNsQixJQUFJN0UsUUFBUSxHQUFHLEdBQUc7TUFDbEIsSUFBTThFLENBQUMsR0FBRyxJQUFJLENBQUN0QixVQUFVO01BQ3pCLElBQUllLElBQUksR0FBRyxDQUFDLEVBQUU7UUFFWixJQUFNUSxRQUFRLEdBQUdQLElBQUksQ0FBQ1EsR0FBRyxDQUFDLENBQUNULElBQUksR0FBR0csTUFBTSxHQUFHSSxDQUFDLENBQUM7UUFDN0NELFFBQVEsR0FDTixJQUFJLENBQUMzRSxRQUFRLEdBQ2I2RSxRQUFRLElBQ0osQ0FBQ1QsRUFBRSxHQUFHQyxJQUFJLEdBQUdHLE1BQU0sR0FBR0UsRUFBRSxJQUFJRCxNQUFNLEdBQUlILElBQUksQ0FBQ1MsR0FBRyxDQUFDTixNQUFNLEdBQUdHLENBQUMsQ0FBQyxHQUMxREYsRUFBRSxHQUFHSixJQUFJLENBQUNVLEdBQUcsQ0FBQ1AsTUFBTSxHQUFHRyxDQUFDLENBQUMsQ0FBQztRQUdoQzlFLFFBQVEsR0FDTnVFLElBQUksR0FDRkcsTUFBTSxHQUNOSyxRQUFRLElBQ05QLElBQUksQ0FBQ1MsR0FBRyxDQUFDTixNQUFNLEdBQUdHLENBQUMsQ0FBQyxJQUFJUixFQUFFLEdBQUdDLElBQUksR0FBR0csTUFBTSxHQUFHRSxFQUFFLENBQUMsR0FBSUQsTUFBTSxHQUMxREMsRUFBRSxHQUFHSixJQUFJLENBQUNVLEdBQUcsQ0FBQ1AsTUFBTSxHQUFHRyxDQUFDLENBQUMsQ0FBQyxHQUM5QkMsUUFBUSxJQUNMUCxJQUFJLENBQUNVLEdBQUcsQ0FBQ1AsTUFBTSxHQUFHRyxDQUFDLENBQUMsSUFBSVIsRUFBRSxHQUFHQyxJQUFJLEdBQUdHLE1BQU0sR0FBR0UsRUFBRSxDQUFDLEdBQy9DRCxNQUFNLEdBQUdDLEVBQUUsR0FBR0osSUFBSSxDQUFDUyxHQUFHLENBQUNOLE1BQU0sR0FBR0csQ0FBQyxDQUFDLENBQUM7TUFDM0MsQ0FBQyxNQUFNO1FBRUwsSUFBTUMsU0FBUSxHQUFHUCxJQUFJLENBQUNRLEdBQUcsQ0FBQyxDQUFDTixNQUFNLEdBQUdJLENBQUMsQ0FBQztRQUN0Q0QsUUFBUSxHQUFHLElBQUksQ0FBQzNFLFFBQVEsR0FBRzZFLFNBQVEsSUFBSUgsRUFBRSxHQUFHLENBQUNOLEVBQUUsR0FBR0ksTUFBTSxHQUFHRSxFQUFFLElBQUlFLENBQUMsQ0FBQztRQUNuRTlFLFFBQVEsR0FDTitFLFNBQVEsSUFBSVQsRUFBRSxJQUFJUSxDQUFDLEdBQUdKLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBR0ksQ0FBQyxHQUFHRixFQUFFLElBQUlGLE1BQU0sR0FBR0EsTUFBTSxDQUFDLENBQUM7TUFDbkU7TUFFQSxJQUFJLENBQUNyQixTQUFTLEdBQUdFLEdBQUc7TUFDcEIsSUFBSSxDQUFDTCxhQUFhLEdBQUcyQixRQUFRO01BQzdCLElBQUksQ0FBQzVFLGFBQWEsR0FBR0QsUUFBUTtNQUU3QixJQUFJLENBQUNtRCxTQUFTLENBQUMwQixRQUFRLENBQUM7TUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQzdCLFFBQVEsRUFBRTtRQUVsQjtNQUNGO01BR0EsSUFBSW1DLGNBQWMsR0FBRyxLQUFLO01BQzFCLElBQUksSUFBSSxDQUFDMUYsa0JBQWtCLElBQUksSUFBSSxDQUFDa0MsVUFBVSxLQUFLLENBQUMsRUFBRTtRQUNwRCxJQUFJLElBQUksQ0FBQ3NCLGNBQWMsR0FBRyxJQUFJLENBQUMvQyxRQUFRLEVBQUU7VUFDdkNpRixjQUFjLEdBQUdOLFFBQVEsR0FBRyxJQUFJLENBQUMzRSxRQUFRO1FBQzNDLENBQUMsTUFBTTtVQUNMaUYsY0FBYyxHQUFHTixRQUFRLEdBQUcsSUFBSSxDQUFDM0UsUUFBUTtRQUMzQztNQUNGO01BQ0EsSUFBTWtGLFVBQVUsR0FBR1osSUFBSSxDQUFDYSxHQUFHLENBQUNyRixRQUFRLENBQUMsSUFBSSxJQUFJLENBQUNILG1CQUFtQjtNQUNqRSxJQUFJeUYsY0FBYyxHQUFHLElBQUk7TUFDekIsSUFBSSxJQUFJLENBQUMzRCxVQUFVLEtBQUssQ0FBQyxFQUFFO1FBQ3pCMkQsY0FBYyxHQUNaZCxJQUFJLENBQUNhLEdBQUcsQ0FBQyxJQUFJLENBQUNuRixRQUFRLEdBQUcyRSxRQUFRLENBQUMsSUFBSSxJQUFJLENBQUNsRiwwQkFBMEI7TUFDekU7TUFFQSxJQUFJd0YsY0FBYyxJQUFLQyxVQUFVLElBQUlFLGNBQWUsRUFBRTtRQUNwRCxJQUFJLElBQUksQ0FBQzNELFVBQVUsS0FBSyxDQUFDLEVBQUU7VUFFekIsSUFBSSxDQUFDdUIsYUFBYSxHQUFHLElBQUksQ0FBQ2hELFFBQVE7VUFDbEMsSUFBSSxDQUFDRCxhQUFhLEdBQUcsQ0FBQztVQUN0QixJQUFJLENBQUNrRCxTQUFTLENBQUMsSUFBSSxDQUFDakQsUUFBUSxDQUFDO1FBQy9CO1FBRUEsSUFBSSxDQUFDcUYsZ0JBQWdCLENBQUM7VUFBQ0MsUUFBUSxFQUFFO1FBQUksQ0FBQyxDQUFDO1FBQ3ZDO01BQ0Y7TUFFQSxJQUFJLENBQUNDLGVBQWUsR0FBR0MscUJBQXFCLENBQUMsSUFBSSxDQUFDL0MsUUFBUSxDQUFDZ0QsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3hFO0VBQUM7SUFBQXZJLEdBQUE7SUFBQTNCLEtBQUEsRUFFRCxTQUFBbUssS0FBQSxFQUFhO01BQ1gsSUFBQS9KLEtBQUEsQ0FBQUgsT0FBQSxNQUFBTSxnQkFBQSxDQUFBTixPQUFBLEVBQUFrRCxlQUFBLENBQUF2QixTQUFBLGlCQUFBRSxJQUFBO01BQ0EsSUFBSSxDQUFDeUYsUUFBUSxHQUFHLEtBQUs7TUFDckI2QyxZQUFZLENBQUMsSUFBSSxDQUFDOUIsUUFBUSxDQUFDO01BQzNCK0IsTUFBTSxDQUFDQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUNOLGVBQWUsQ0FBQztNQUNqRCxJQUFJLENBQUNGLGdCQUFnQixDQUFDO1FBQUNDLFFBQVEsRUFBRTtNQUFLLENBQUMsQ0FBQztJQUMxQztFQUFDO0VBQUEsT0FBQTVHLGVBQUE7QUFBQSxFQS9SMENvSCxtQkFBUztBQUFBeEssT0FBQSxDQUFBRSxPQUFBLEdBQUFrRCxlQUFBIn0=