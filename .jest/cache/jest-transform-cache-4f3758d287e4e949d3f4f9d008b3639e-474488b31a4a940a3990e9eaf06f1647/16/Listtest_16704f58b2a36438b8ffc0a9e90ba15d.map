{"version":3,"names":["_getJestObj","mock","getContacts","jest","fn","Object","assign","requireActual","useIsFocused","_interopRequireDefault","require","_asyncToGenerator2","_react","_reactNative","_List","_contact","_testUtils","_reactNative2","_jsxRuntime","_require","createTestProps","props","navigation","navigate","describe","afterAll","mockedGetContacts","mockClear","test","default","mockContacts","id","firstName","lastName","age","photo","mockResolvedValueOnce","data","status","_renderWithProviders","renderWithProviders","jsx","route","key","name","getByText","waitFor","expect","toBeTruthy","toHaveBeenCalledTimes","spyOn","Alert","alert","toHaveBeenCalledWith"],"sources":["List.test.tsx"],"sourcesContent":["import React from 'react';\nimport {screen, waitFor} from '@testing-library/react-native';\nimport List from '../List';\nimport {getContacts} from '../../apis/contact';\nimport {AxiosResponse} from 'axios';\nimport {StackNavigationProp} from '@react-navigation/stack';\nimport {RootStackParamList} from '../../types';\nimport {renderWithProviders} from '../../utils/test-utils';\nimport {Alert} from 'react-native';\n\njest.mock('../../apis/contact', () => ({\n  getContacts: jest.fn(),\n}));\n\njest.mock('@react-navigation/native', () => ({\n  ...jest.requireActual('@react-navigation/native'),\n  useIsFocused: jest.fn(),\n}));\n\ntype NavigationProps = StackNavigationProp<RootStackParamList, 'List'>;\n\nconst createTestProps = (props: Partial<NavigationProps>) => ({\n  navigation: {\n    navigate: jest.fn(),\n    ...props,\n  } as NavigationProps,\n  ...props,\n});\n\ndescribe('List', () => {\n  afterAll(() => {\n    const mockedGetContacts = getContacts as jest.MockedFunction<\n      typeof getContacts\n    >;\n\n    mockedGetContacts.mockClear();\n  });\n  test('renders correctly and fetches contacts', async () => {\n    const mockContacts = [\n      {\n        id: '111',\n        firstName: 'John',\n        lastName: 'Doe',\n        age: 20,\n        photo: 'https://picsum.photos/200',\n      },\n      {\n        id: '222',\n        firstName: 'Jane',\n        lastName: 'Smith',\n        age: 20,\n        photo: 'https://picsum.photos/200',\n      },\n    ];\n    const mockedGetContacts = getContacts as jest.MockedFunction<\n      typeof getContacts\n    >;\n    mockedGetContacts.mockResolvedValueOnce({\n      data: {data: mockContacts},\n      status: 200,\n    } as AxiosResponse);\n\n    const props = createTestProps({});\n    const {getByText} = renderWithProviders(\n      <List route={{key: 'List', name: 'List'}} {...props} />,\n    );\n\n    await waitFor(() => {\n      expect(getByText('Contact')).toBeTruthy();\n      expect(getByText('John Doe')).toBeTruthy();\n      expect(getByText('Jane Smith')).toBeTruthy();\n    });\n\n    expect(mockedGetContacts).toHaveBeenCalledTimes(1);\n  });\n\n  test('displays error message when fetching contacts fails', async () => {\n    const mockedGetContacts = getContacts as jest.MockedFunction<\n      typeof getContacts\n    >;\n    mockedGetContacts.mockResolvedValueOnce({\n      data: {data: null},\n      status: 500,\n    } as AxiosResponse);\n\n    jest.spyOn(Alert, 'alert');\n\n    const props = createTestProps({});\n    renderWithProviders(\n      <List route={{key: 'List', name: 'List'}} {...props} />,\n    );\n\n    await waitFor(() => {\n      expect(Alert.alert).toHaveBeenCalledWith('Error', 'something went wrong');\n    });\n\n    expect(mockedGetContacts).toHaveBeenCalledTimes(1);\n  });\n});\n"],"mappings":"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"}