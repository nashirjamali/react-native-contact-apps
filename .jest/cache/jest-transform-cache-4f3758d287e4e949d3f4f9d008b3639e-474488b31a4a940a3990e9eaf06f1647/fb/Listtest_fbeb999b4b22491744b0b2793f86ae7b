4fb607ef1ff218700dbe9229859b8f35
_getJestObj().mock('../../apis/contact', function () {
  return {
    getContacts: jest.fn()
  };
});
_getJestObj().mock('@react-navigation/native', function () {
  return Object.assign({}, jest.requireActual('@react-navigation/native'), {
    useIsFocused: jest.fn()
  });
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _List = _interopRequireDefault(require("../List"));
var _contact = require("../../apis/contact");
var _testUtils = require("../../utils/test-utils");
var _reactNative2 = require("react-native");
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var createTestProps = function createTestProps(props) {
  return Object.assign({
    navigation: Object.assign({
      navigate: jest.fn()
    }, props)
  }, props);
};
describe('List', function () {
  afterEach(function () {
    var mockedGetContacts = _contact.getContacts;
    mockedGetContacts.mockClear();
  });
  test('renders correctly and fetches contacts', (0, _asyncToGenerator2.default)(function* () {
    var mockContacts = [{
      id: '111',
      firstName: 'John',
      lastName: 'Doe',
      age: 20,
      photo: 'https://picsum.photos/200'
    }, {
      id: '222',
      firstName: 'Jane',
      lastName: 'Smith',
      age: 20,
      photo: 'https://picsum.photos/200'
    }];
    var mockedGetContacts = _contact.getContacts;
    mockedGetContacts.mockResolvedValueOnce({
      data: {
        data: mockContacts
      },
      status: 200
    });
    var props = createTestProps({});
    var _renderWithProviders = (0, _testUtils.renderWithProviders)((0, _jsxRuntime.jsx)(_List.default, Object.assign({
        route: {
          key: 'List',
          name: 'List'
        }
      }, props))),
      getByText = _renderWithProviders.getByText;
    yield (0, _reactNative.waitFor)(function () {
      expect(getByText('Contact')).toBeTruthy();
      expect(getByText('John Doe')).toBeTruthy();
      expect(getByText('Jane Smith')).toBeTruthy();
    });
    expect(mockedGetContacts).toHaveBeenCalledTimes(1);
  }));
  test('displays error message when fetching contacts fails', (0, _asyncToGenerator2.default)(function* () {
    var mockedGetContacts = _contact.getContacts;
    mockedGetContacts.mockResolvedValueOnce({
      data: {
        data: null
      },
      status: 500
    });
    jest.spyOn(_reactNative2.Alert, 'alert');
    var props = createTestProps({});
    (0, _testUtils.renderWithProviders)((0, _jsxRuntime.jsx)(_List.default, Object.assign({
      route: {
        key: 'List',
        name: 'List'
      }
    }, props)));
    yield (0, _reactNative.waitFor)(function () {
      expect(_reactNative2.Alert.alert).toHaveBeenCalledWith('Error', 'something went wrong');
    });
    expect(mockedGetContacts).toHaveBeenCalledTimes(1);
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJnZXRDb250YWN0cyIsImplc3QiLCJmbiIsIk9iamVjdCIsImFzc2lnbiIsInJlcXVpcmVBY3R1YWwiLCJ1c2VJc0ZvY3VzZWQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWFjdCIsIl9yZWFjdE5hdGl2ZSIsIl9MaXN0IiwiX2NvbnRhY3QiLCJfdGVzdFV0aWxzIiwiX3JlYWN0TmF0aXZlMiIsIl9qc3hSdW50aW1lIiwiX3JlcXVpcmUiLCJjcmVhdGVUZXN0UHJvcHMiLCJwcm9wcyIsIm5hdmlnYXRpb24iLCJuYXZpZ2F0ZSIsImRlc2NyaWJlIiwiYWZ0ZXJFYWNoIiwibW9ja2VkR2V0Q29udGFjdHMiLCJtb2NrQ2xlYXIiLCJ0ZXN0IiwiZGVmYXVsdCIsIm1vY2tDb250YWN0cyIsImlkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJhZ2UiLCJwaG90byIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsImRhdGEiLCJzdGF0dXMiLCJfcmVuZGVyV2l0aFByb3ZpZGVycyIsInJlbmRlcldpdGhQcm92aWRlcnMiLCJqc3giLCJyb3V0ZSIsImtleSIsIm5hbWUiLCJnZXRCeVRleHQiLCJ3YWl0Rm9yIiwiZXhwZWN0IiwidG9CZVRydXRoeSIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsInNweU9uIiwiQWxlcnQiLCJhbGVydCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIl0sInNvdXJjZXMiOlsiTGlzdC50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtzY3JlZW4sIHdhaXRGb3J9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QtbmF0aXZlJztcbmltcG9ydCBMaXN0IGZyb20gJy4uL0xpc3QnO1xuaW1wb3J0IHtnZXRDb250YWN0c30gZnJvbSAnLi4vLi4vYXBpcy9jb250YWN0JztcbmltcG9ydCB7QXhpb3NSZXNwb25zZX0gZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHtTdGFja05hdmlnYXRpb25Qcm9wfSBmcm9tICdAcmVhY3QtbmF2aWdhdGlvbi9zdGFjayc7XG5pbXBvcnQge1Jvb3RTdGFja1BhcmFtTGlzdH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHtyZW5kZXJXaXRoUHJvdmlkZXJzfSBmcm9tICcuLi8uLi91dGlscy90ZXN0LXV0aWxzJztcbmltcG9ydCB7QWxlcnR9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5cbmplc3QubW9jaygnLi4vLi4vYXBpcy9jb250YWN0JywgKCkgPT4gKHtcbiAgZ2V0Q29udGFjdHM6IGplc3QuZm4oKSxcbn0pKTtcblxuamVzdC5tb2NrKCdAcmVhY3QtbmF2aWdhdGlvbi9uYXRpdmUnLCAoKSA9PiAoe1xuICAuLi5qZXN0LnJlcXVpcmVBY3R1YWwoJ0ByZWFjdC1uYXZpZ2F0aW9uL25hdGl2ZScpLFxuICB1c2VJc0ZvY3VzZWQ6IGplc3QuZm4oKSxcbn0pKTtcblxudHlwZSBOYXZpZ2F0aW9uUHJvcHMgPSBTdGFja05hdmlnYXRpb25Qcm9wPFJvb3RTdGFja1BhcmFtTGlzdCwgJ0xpc3QnPjtcblxuY29uc3QgY3JlYXRlVGVzdFByb3BzID0gKHByb3BzOiBQYXJ0aWFsPE5hdmlnYXRpb25Qcm9wcz4pID0+ICh7XG4gIG5hdmlnYXRpb246IHtcbiAgICBuYXZpZ2F0ZTogamVzdC5mbigpLFxuICAgIC4uLnByb3BzLFxuICB9IGFzIE5hdmlnYXRpb25Qcm9wcyxcbiAgLi4ucHJvcHMsXG59KTtcblxuZGVzY3JpYmUoJ0xpc3QnLCAoKSA9PiB7XG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgY29uc3QgbW9ja2VkR2V0Q29udGFjdHMgPSBnZXRDb250YWN0cyBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPFxuICAgICAgdHlwZW9mIGdldENvbnRhY3RzXG4gICAgPjtcblxuICAgIG1vY2tlZEdldENvbnRhY3RzLm1vY2tDbGVhcigpO1xuICB9KTtcbiAgdGVzdCgncmVuZGVycyBjb3JyZWN0bHkgYW5kIGZldGNoZXMgY29udGFjdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0NvbnRhY3RzID0gW1xuICAgICAge1xuICAgICAgICBpZDogJzExMScsXG4gICAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgICAgIGFnZTogMjAsXG4gICAgICAgIHBob3RvOiAnaHR0cHM6Ly9waWNzdW0ucGhvdG9zLzIwMCcsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJzIyMicsXG4gICAgICAgIGZpcnN0TmFtZTogJ0phbmUnLFxuICAgICAgICBsYXN0TmFtZTogJ1NtaXRoJyxcbiAgICAgICAgYWdlOiAyMCxcbiAgICAgICAgcGhvdG86ICdodHRwczovL3BpY3N1bS5waG90b3MvMjAwJyxcbiAgICAgIH0sXG4gICAgXTtcbiAgICBjb25zdCBtb2NrZWRHZXRDb250YWN0cyA9IGdldENvbnRhY3RzIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248XG4gICAgICB0eXBlb2YgZ2V0Q29udGFjdHNcbiAgICA+O1xuICAgIG1vY2tlZEdldENvbnRhY3RzLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICBkYXRhOiB7ZGF0YTogbW9ja0NvbnRhY3RzfSxcbiAgICAgIHN0YXR1czogMjAwLFxuICAgIH0gYXMgQXhpb3NSZXNwb25zZSk7XG5cbiAgICBjb25zdCBwcm9wcyA9IGNyZWF0ZVRlc3RQcm9wcyh7fSk7XG4gICAgY29uc3Qge2dldEJ5VGV4dH0gPSByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgPExpc3Qgcm91dGU9e3trZXk6ICdMaXN0JywgbmFtZTogJ0xpc3QnfX0gey4uLnByb3BzfSAvPixcbiAgICApO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QoZ2V0QnlUZXh0KCdDb250YWN0JykpLnRvQmVUcnV0aHkoKTtcbiAgICAgIGV4cGVjdChnZXRCeVRleHQoJ0pvaG4gRG9lJykpLnRvQmVUcnV0aHkoKTtcbiAgICAgIGV4cGVjdChnZXRCeVRleHQoJ0phbmUgU21pdGgnKSkudG9CZVRydXRoeSgpO1xuICAgIH0pO1xuXG4gICAgZXhwZWN0KG1vY2tlZEdldENvbnRhY3RzKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2Rpc3BsYXlzIGVycm9yIG1lc3NhZ2Ugd2hlbiBmZXRjaGluZyBjb250YWN0cyBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2NrZWRHZXRDb250YWN0cyA9IGdldENvbnRhY3RzIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248XG4gICAgICB0eXBlb2YgZ2V0Q29udGFjdHNcbiAgICA+O1xuICAgIG1vY2tlZEdldENvbnRhY3RzLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICBkYXRhOiB7ZGF0YTogbnVsbH0sXG4gICAgICBzdGF0dXM6IDUwMCxcbiAgICB9IGFzIEF4aW9zUmVzcG9uc2UpO1xuXG4gICAgamVzdC5zcHlPbihBbGVydCwgJ2FsZXJ0Jyk7XG5cbiAgICBjb25zdCBwcm9wcyA9IGNyZWF0ZVRlc3RQcm9wcyh7fSk7XG4gICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgIDxMaXN0IHJvdXRlPXt7a2V5OiAnTGlzdCcsIG5hbWU6ICdMaXN0J319IHsuLi5wcm9wc30gLz4sXG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KEFsZXJ0LmFsZXJ0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnRXJyb3InLCAnc29tZXRoaW5nIHdlbnQgd3JvbmcnKTtcbiAgICB9KTtcblxuICAgIGV4cGVjdChtb2NrZWRHZXRDb250YWN0cykudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFVQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7RUFBQSxPQUFPO0lBQ3JDQyxXQUFXLEVB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