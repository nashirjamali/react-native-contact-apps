8c8269b8ee81840c65c95966ba294e78
_getJestObj().mock('../../apis/contact', function () {
  return {
    getContacts: jest.fn()
  };
});
_getJestObj().mock('@react-navigation/native', function () {
  return Object.assign({}, jest.requireActual('@react-navigation/native'), {
    useIsFocused: jest.fn()
  });
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _List = _interopRequireDefault(require("../List"));
var _contact = require("../../apis/contact");
var _testUtils = require("../../utils/test-utils");
var _reactNative2 = require("react-native");
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var createTestProps = function createTestProps(props) {
  return Object.assign({
    navigation: Object.assign({
      navigate: jest.fn()
    }, props)
  }, props);
};
describe('List', function () {
  afterEach(function () {
    var mockedGetContacts = _contact.getContacts;
    mockedGetContacts.mockClear();
  });
  test('renders correctly and fetches contacts', (0, _asyncToGenerator2.default)(function* () {
    var mockContacts = [{
      id: '111',
      firstName: 'John',
      lastName: 'Doe',
      age: 20,
      photo: 'https://picsum.photos/200'
    }, {
      id: '222',
      firstName: 'Jane',
      lastName: 'Smith',
      age: 20,
      photo: 'https://picsum.photos/200'
    }];
    var mockedGetContacts = _contact.getContacts;
    mockedGetContacts.mockResolvedValueOnce({
      data: {
        data: mockContacts
      },
      status: 200
    });
    var props = createTestProps({});
    var _renderWithProviders = (0, _testUtils.renderWithProviders)((0, _jsxRuntime.jsx)(_List.default, Object.assign({
        route: {
          key: 'List',
          name: 'List'
        }
      }, props))),
      getByText = _renderWithProviders.getByText;
    yield (0, _reactNative.waitFor)(function () {
      expect(getByText('Contact')).toBeTruthy();
      expect(getByText('John Doe')).toBeTruthy();
      expect(getByText('Jane Smith')).toBeTruthy();
    });
    expect(mockedGetContacts).toHaveBeenCalledTimes(1);
  }));
  test('displays error message when fetching contacts fails', (0, _asyncToGenerator2.default)(function* () {
    var mockedGetContacts = _contact.getContacts;
    mockedGetContacts.mockResolvedValueOnce({
      data: {
        data: null
      },
      status: 500
    });
    jest.spyOn(_reactNative2.Alert, 'alert');
    var props = createTestProps({});
    (0, _testUtils.renderWithProviders)((0, _jsxRuntime.jsx)(_List.default, Object.assign({
      route: {
        key: 'List',
        name: 'List'
      }
    }, props)));
    yield (0, _reactNative.waitFor)(function () {
      expect(_reactNative2.Alert.alert).toHaveBeenCalledWith('Error', 'something went wrong');
    });
    expect(mockedGetContacts).toHaveBeenCalledTimes(1);
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJnZXRDb250YWN0cyIsImplc3QiLCJmbiIsIk9iamVjdCIsImFzc2lnbiIsInJlcXVpcmVBY3R1YWwiLCJ1c2VJc0ZvY3VzZWQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWFjdCIsIl9yZWFjdE5hdGl2ZSIsIl9MaXN0IiwiX2NvbnRhY3QiLCJfdGVzdFV0aWxzIiwiX3JlYWN0TmF0aXZlMiIsIl9qc3hSdW50aW1lIiwiX3JlcXVpcmUiLCJjcmVhdGVUZXN0UHJvcHMiLCJwcm9wcyIsIm5hdmlnYXRpb24iLCJuYXZpZ2F0ZSIsImRlc2NyaWJlIiwiYWZ0ZXJFYWNoIiwibW9ja2VkR2V0Q29udGFjdHMiLCJtb2NrQ2xlYXIiLCJ0ZXN0IiwiZGVmYXVsdCIsIm1vY2tDb250YWN0cyIsImlkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJhZ2UiLCJwaG90byIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsImRhdGEiLCJzdGF0dXMiLCJfcmVuZGVyV2l0aFByb3ZpZGVycyIsInJlbmRlcldpdGhQcm92aWRlcnMiLCJqc3giLCJyb3V0ZSIsImtleSIsIm5hbWUiLCJnZXRCeVRleHQiLCJ3YWl0Rm9yIiwiZXhwZWN0IiwidG9CZVRydXRoeSIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsInNweU9uIiwiQWxlcnQiLCJhbGVydCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIl0sInNvdXJjZXMiOlsiTGlzdC50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHt3YWl0Rm9yfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0LW5hdGl2ZSc7XG5pbXBvcnQgTGlzdCBmcm9tICcuLi9MaXN0JztcbmltcG9ydCB7Z2V0Q29udGFjdHN9IGZyb20gJy4uLy4uL2FwaXMvY29udGFjdCc7XG5pbXBvcnQge0F4aW9zUmVzcG9uc2V9IGZyb20gJ2F4aW9zJztcbmltcG9ydCB7U3RhY2tOYXZpZ2F0aW9uUHJvcH0gZnJvbSAnQHJlYWN0LW5hdmlnYXRpb24vc3RhY2snO1xuaW1wb3J0IHtSb290U3RhY2tQYXJhbUxpc3R9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7cmVuZGVyV2l0aFByb3ZpZGVyc30gZnJvbSAnLi4vLi4vdXRpbHMvdGVzdC11dGlscyc7XG5pbXBvcnQge0FsZXJ0fSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuXG5qZXN0Lm1vY2soJy4uLy4uL2FwaXMvY29udGFjdCcsICgpID0+ICh7XG4gIGdldENvbnRhY3RzOiBqZXN0LmZuKCksXG59KSk7XG5cbmplc3QubW9jaygnQHJlYWN0LW5hdmlnYXRpb24vbmF0aXZlJywgKCkgPT4gKHtcbiAgLi4uamVzdC5yZXF1aXJlQWN0dWFsKCdAcmVhY3QtbmF2aWdhdGlvbi9uYXRpdmUnKSxcbiAgdXNlSXNGb2N1c2VkOiBqZXN0LmZuKCksXG59KSk7XG5cbnR5cGUgTmF2aWdhdGlvblByb3BzID0gU3RhY2tOYXZpZ2F0aW9uUHJvcDxSb290U3RhY2tQYXJhbUxpc3QsICdMaXN0Jz47XG5cbmNvbnN0IGNyZWF0ZVRlc3RQcm9wcyA9IChwcm9wczogUGFydGlhbDxOYXZpZ2F0aW9uUHJvcHM+KSA9PiAoe1xuICBuYXZpZ2F0aW9uOiB7XG4gICAgbmF2aWdhdGU6IGplc3QuZm4oKSxcbiAgICAuLi5wcm9wcyxcbiAgfSBhcyBOYXZpZ2F0aW9uUHJvcHMsXG4gIC4uLnByb3BzLFxufSk7XG5cbmRlc2NyaWJlKCdMaXN0JywgKCkgPT4ge1xuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tlZEdldENvbnRhY3RzID0gZ2V0Q29udGFjdHMgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjxcbiAgICAgIHR5cGVvZiBnZXRDb250YWN0c1xuICAgID47XG5cbiAgICBtb2NrZWRHZXRDb250YWN0cy5tb2NrQ2xlYXIoKTtcbiAgfSk7XG4gIHRlc3QoJ3JlbmRlcnMgY29ycmVjdGx5IGFuZCBmZXRjaGVzIGNvbnRhY3RzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tDb250YWN0cyA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICcxMTEnLFxuICAgICAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgICAgbGFzdE5hbWU6ICdEb2UnLFxuICAgICAgICBhZ2U6IDIwLFxuICAgICAgICBwaG90bzogJ2h0dHBzOi8vcGljc3VtLnBob3Rvcy8yMDAnLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICcyMjInLFxuICAgICAgICBmaXJzdE5hbWU6ICdKYW5lJyxcbiAgICAgICAgbGFzdE5hbWU6ICdTbWl0aCcsXG4gICAgICAgIGFnZTogMjAsXG4gICAgICAgIHBob3RvOiAnaHR0cHM6Ly9waWNzdW0ucGhvdG9zLzIwMCcsXG4gICAgICB9LFxuICAgIF07XG4gICAgY29uc3QgbW9ja2VkR2V0Q29udGFjdHMgPSBnZXRDb250YWN0cyBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPFxuICAgICAgdHlwZW9mIGdldENvbnRhY3RzXG4gICAgPjtcbiAgICBtb2NrZWRHZXRDb250YWN0cy5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgZGF0YToge2RhdGE6IG1vY2tDb250YWN0c30sXG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICB9IGFzIEF4aW9zUmVzcG9uc2UpO1xuXG4gICAgY29uc3QgcHJvcHMgPSBjcmVhdGVUZXN0UHJvcHMoe30pO1xuICAgIGNvbnN0IHtnZXRCeVRleHR9ID0gcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgIDxMaXN0IHJvdXRlPXt7a2V5OiAnTGlzdCcsIG5hbWU6ICdMaXN0J319IHsuLi5wcm9wc30gLz4sXG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KGdldEJ5VGV4dCgnQ29udGFjdCcpKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QoZ2V0QnlUZXh0KCdKb2huIERvZScpKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QoZ2V0QnlUZXh0KCdKYW5lIFNtaXRoJykpLnRvQmVUcnV0aHkoKTtcbiAgICB9KTtcblxuICAgIGV4cGVjdChtb2NrZWRHZXRDb250YWN0cykudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICB9KTtcblxuICB0ZXN0KCdkaXNwbGF5cyBlcnJvciBtZXNzYWdlIHdoZW4gZmV0Y2hpbmcgY29udGFjdHMgZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja2VkR2V0Q29udGFjdHMgPSBnZXRDb250YWN0cyBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPFxuICAgICAgdHlwZW9mIGdldENvbnRhY3RzXG4gICAgPjtcbiAgICBtb2NrZWRHZXRDb250YWN0cy5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgZGF0YToge2RhdGE6IG51bGx9LFxuICAgICAgc3RhdHVzOiA1MDAsXG4gICAgfSBhcyBBeGlvc1Jlc3BvbnNlKTtcblxuICAgIGplc3Quc3B5T24oQWxlcnQsICdhbGVydCcpO1xuXG4gICAgY29uc3QgcHJvcHMgPSBjcmVhdGVUZXN0UHJvcHMoe30pO1xuICAgIHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICA8TGlzdCByb3V0ZT17e2tleTogJ0xpc3QnLCBuYW1lOiAnTGlzdCd9fSB7Li4ucHJvcHN9IC8+LFxuICAgICk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChBbGVydC5hbGVydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0Vycm9yJywgJ3NvbWV0aGluZyB3ZW50IHdyb25nJyk7XG4gICAgfSk7XG5cbiAgICBleHBlY3QobW9ja2VkR2V0Q29udGFjdHMpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBVUFBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLG9CQUFvQixFQUFFO0VBQUEsT0FBTztJQUNyQ0MsV0FBVyxFQUFFQyxJQUFJ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